# å¾®å‰ç«¯æ¶æ„ä¼˜åŒ– - å¿«é€Ÿæµ‹è¯•æ‰§è¡Œæ¸…å•

**æ‰§è¡Œæ—¶é—´**: é¢„è®¡ 30-45 åˆ†é’Ÿ
**æµ‹è¯•èŒƒå›´**: User Story 1-4 (MVP æ ¸å¿ƒåŠŸèƒ½)

---

## ğŸš€ ç¬¬ä¸€æ­¥: å¯åŠ¨æœåŠ¡ (5åˆ†é’Ÿ)

### 1.1 åœæ­¢å·²æœ‰æœåŠ¡
```bash
make kill
```

### 1.2 å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
# æ¨èæ–¹å¼ (è‡ªåŠ¨å¤„ç†ä»£ç†é—®é¢˜)
./dev.sh

# æˆ–ä½¿ç”¨ make
make dev
```

### 1.3 ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
è§‚å¯Ÿç»ˆç«¯è¾“å‡º,ç¡®è®¤æ‰€æœ‰7ä¸ªæœåŠ¡éƒ½å¯åŠ¨æˆåŠŸ:
- âœ“ Main App (3000)
- âœ“ Dashboard (3001)
- âœ“ Agent (3002)
- âœ“ Cluster (3003)
- âœ“ Monitor (3004)
- âœ“ System (3005)
- âœ“ Image Build (3006)

---

## ğŸ§ª ç¬¬äºŒæ­¥: åŸºç¡€åŠŸèƒ½æµ‹è¯• (5åˆ†é’Ÿ)

### 2.1 è®¿é—®ä¸»åº”ç”¨
æ‰“å¼€æµè§ˆå™¨: http://localhost:3000

### 2.2 ç™»å½•
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

### 2.3 å¿«é€Ÿæ£€æŸ¥
- [ ] ç™»å½•æˆåŠŸ
- [ ] ä»ªè¡¨ç›˜æ­£å¸¸æ˜¾ç¤º
- [ ] å·¦ä¾§èœå•å¯è§
- [ ] æ— æ˜æ˜¾é”™è¯¯æç¤º

---

## ğŸ“Š ç¬¬ä¸‰æ­¥: User Story 1 - é…ç½®ç®¡ç†æµ‹è¯• (5åˆ†é’Ÿ)

### 3.1 æ£€æŸ¥å¯åŠ¨æ—¥å¿—
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å° (F12),æŸ¥çœ‹ Console:

**æœŸæœ›çœ‹åˆ°**:
```
[CONFIG] Validating micro-apps configuration...
[CONFIG] âœ… Configuration validated successfully
[APP] ğŸš€ Application starting with validated configuration
```

### 3.2 æµ‹è¯•é…ç½®é©±åŠ¨çš„ URL è§£æ
å¯¼èˆªåˆ°å„ä¸ªå¾®åº”ç”¨,æ§åˆ¶å°åº”æ˜¾ç¤º:
```
[MicroAppContainer] Loading micro app: dashboard-app from URL: //localhost:3001
[MicroAppContainer] Loading micro app: system-app from URL: //localhost:3005
```

**æµ‹è¯•æ­¥éª¤**:
- [ ] ç‚¹å‡» "ä»ªè¡¨ç›˜" â†’ æ£€æŸ¥æ§åˆ¶å° URL
- [ ] ç‚¹å‡» "ç³»ç»Ÿç®¡ç†" â†’ æ£€æŸ¥æ§åˆ¶å° URL
- [ ] ç‚¹å‡» "Agent ç®¡ç†" â†’ æ£€æŸ¥æ§åˆ¶å° URL

**âœ… é€šè¿‡æ ‡å‡†**: æ¯ä¸ªå¾®åº”ç”¨éƒ½æ˜¾ç¤ºæ­£ç¡®çš„ localhost URL

---

## ğŸ”„ ç¬¬å››æ­¥: User Story 2 - è·¯ç”±åŒæ­¥æµ‹è¯• (10åˆ†é’Ÿ)

### 4.1 æ·±åº¦è·¯ç”±ç›´æ¥å¯¼èˆªæµ‹è¯•

**æµ‹è¯• 1: ç›´æ¥è®¿é—®æ·±åº¦è·¯ç”±**
1. åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥: `http://localhost:3000/system/users`
2. æŒ‰ Enter
3. **æœŸæœ›**: é¡µé¢ç«‹å³åŠ è½½ç”¨æˆ·åˆ—è¡¨,æ— ç™½å±

**æ§åˆ¶å°æœŸæœ›æ—¥å¿—**:
```
[System App] âœ… RouteSync listener set up
[RouteSync] Notified system-app: {path: '/users', ...}
[RouteSync] system-app received route change: ...
```

**é‡å¤æµ‹è¯•å…¶ä»–è·¯ç”±**:
- [ ] `/system/roles` - è§’è‰²ç®¡ç†
- [ ] `/system/permissions` - æƒé™ç®¡ç†
- [ ] `/agents` - Agent åˆ—è¡¨
- [ ] `/clusters` - é›†ç¾¤åˆ—è¡¨

**âœ… é€šè¿‡æ ‡å‡†**:
- æ‰€æœ‰æ·±åº¦è·¯ç”±ç›´æ¥è®¿é—®æ— ç™½å±
- åŠ è½½æ—¶é—´ < 2ç§’
- æ§åˆ¶å°æ˜¾ç¤º RouteSync æ—¥å¿—

### 4.2 å¿«é€Ÿåˆ‡æ¢æµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. å¿«é€Ÿè¿ç»­ç‚¹å‡»: ä»ªè¡¨ç›˜ â†’ Agent â†’ ç³»ç»Ÿ â†’ é›†ç¾¤
2. åœ¨ç³»ç»Ÿç®¡ç†å†…å¿«é€Ÿåˆ‡æ¢: ç”¨æˆ· â†’ è§’è‰² â†’ æƒé™

**è§‚å¯Ÿ**:
- [ ] æ¯æ¬¡åˆ‡æ¢éƒ½æ˜¾ç¤ºæ­£ç¡®å†…å®¹
- [ ] æ— å†…å®¹æ··æ‚æˆ–ä¸²å°
- [ ] æ§åˆ¶å°æ— é”™è¯¯

**âœ… é€šè¿‡æ ‡å‡†**: å†…å®¹æ­£ç¡®,æ— ä¸²å°,æ— é”™è¯¯

---

## ğŸ”— ç¬¬äº”æ­¥: User Story 3 - å…±äº«çŠ¶æ€æµ‹è¯• (5åˆ†é’Ÿ)

### 5.1 æ£€æŸ¥ SharedStateManager åˆå§‹åŒ–

**æ§åˆ¶å°æœŸæœ›æ—¥å¿—**:
```
[SharedStateManager] Initialized with Wujie bus
[SharedStateManager] Setting up bus listeners
```

### 5.2 æµ‹è¯•è·¨åº”ç”¨çŠ¶æ€å…±äº« (å¦‚æœæœ‰å®ç°çš„åŠŸèƒ½)

**æ³¨æ„**: è¿™ä¸ªåŠŸèƒ½éœ€è¦å…·ä½“çš„ä½¿ç”¨åœºæ™¯æ‰èƒ½æµ‹è¯•ã€‚å¦‚æœæ²¡æœ‰å®é™…ä½¿ç”¨å…±äº«çŠ¶æ€çš„åŠŸèƒ½,å¯ä»¥è·³è¿‡è¯¦ç»†æµ‹è¯•ã€‚

**åŸºç¡€æ£€æŸ¥**:
- [ ] åº”ç”¨å¯åŠ¨æ—¶ SharedStateManager åˆå§‹åŒ–æˆåŠŸ
- [ ] æ— ç›¸å…³é”™è¯¯æ—¥å¿—

**âœ… é€šè¿‡æ ‡å‡†**: åˆå§‹åŒ–æˆåŠŸ,æ— é”™è¯¯

---

## ğŸ›¡ï¸ ç¬¬å…­æ­¥: User Story 4 - é”™è¯¯è¾¹ç•Œæµ‹è¯• (10åˆ†é’Ÿ)

### 6.1 æµ‹è¯•åŠ è½½è¶…æ—¶

**æµ‹è¯•æ­¥éª¤**:
1. åœæ­¢æŸä¸ªå¾®åº”ç”¨ (ä¾‹å¦‚ System App):
   ```bash
   # åœ¨æ–°ç»ˆç«¯ä¸­
   lsof -ti:3005 | xargs kill -9
   ```
2. åœ¨æµè§ˆå™¨è®¿é—®: `http://localhost:3000/system`
3. ç­‰å¾… 5 ç§’

**æœŸæœ›ç»“æœ**:
- [ ] æ˜¾ç¤ºé”™è¯¯é¡µé¢ (Ant Design Result ç»„ä»¶)
- [ ] æœ‰ "é‡è¯•" æŒ‰é’®
- [ ] æœ‰ "è¿”å›é¦–é¡µ" æŒ‰é’®
- [ ] æ§åˆ¶å°æ˜¾ç¤ºè¶…æ—¶é”™è¯¯æ—¥å¿—

**æ§åˆ¶å°æœŸæœ›æ—¥å¿—**:
```
[MicroAppContainer] Micro-app loading timeout: system-app
[ERROR REPORTER] âš ï¸ CRITICAL ERROR: Micro-app loading timeout after 5000ms
```

### 6.2 æµ‹è¯•é”™è¯¯æ¢å¤

**æµ‹è¯•æ­¥éª¤**:
1. é‡æ–°å¯åŠ¨ System App:
   ```bash
   cd system-app && pnpm dev
   ```
2. ç‚¹å‡»é”™è¯¯é¡µé¢çš„ "é‡è¯•" æŒ‰é’®

**æœŸæœ›ç»“æœ**:
- [ ] ç‚¹å‡»é‡è¯•å,å¾®åº”ç”¨æˆåŠŸåŠ è½½
- [ ] é”™è¯¯é¡µé¢æ¶ˆå¤±,æ˜¾ç¤ºæ­£å¸¸å†…å®¹

### 6.3 æµ‹è¯•å…¶ä»–åº”ç”¨éš”ç¦»

**æµ‹è¯•æ­¥éª¤**:
1. System App æ˜¾ç¤ºé”™è¯¯æ—¶
2. è®¿é—®å…¶ä»–å¾®åº”ç”¨ (Dashboard, Agent)

**æœŸæœ›ç»“æœ**:
- [ ] å…¶ä»–å¾®åº”ç”¨æ­£å¸¸å·¥ä½œ
- [ ] é”™è¯¯éš”ç¦»,ä¸å½±å“å…¶ä»–åº”ç”¨

**å®Œæˆåé‡å¯ System App**:
```bash
cd system-app && pnpm dev
```

**âœ… é€šè¿‡æ ‡å‡†**:
- è¶…æ—¶æ£€æµ‹å·¥ä½œ
- é”™è¯¯ UI æ­£ç¡®æ˜¾ç¤º
- é‡è¯•åŠŸèƒ½æ­£å¸¸
- é”™è¯¯éš”ç¦»æœ‰æ•ˆ

---

## ğŸ“ ç¬¬ä¸ƒæ­¥: è®°å½•æµ‹è¯•ç»“æœ (5åˆ†é’Ÿ)

### 7.1 å¡«å†™æµ‹è¯•æŠ¥å‘Š

åˆ›å»ºæ–‡ä»¶: `TEST_RESULTS.md`

```markdown
# æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š

**æ‰§è¡Œæ—¥æœŸ**: 2025-10-10
**æ‰§è¡Œäºº**: [æ‚¨çš„åå­—]
**æµ‹è¯•ç¯å¢ƒ**: å¼€å‘ç¯å¢ƒ (localhost)

## åŠŸèƒ½å¼€å…³é…ç½®

å½“å‰é…ç½® (`main-app/.env.development`):
- VITE_FEATURE_UNIFIED_CONFIG: true/false
- VITE_FEATURE_STANDARD_ROUTE_SYNC: true/false
- VITE_FEATURE_SHARED_STATE: true/false (å¦‚æœå­˜åœ¨)

## User Story 1: ç»Ÿä¸€é…ç½®ç®¡ç†

| æµ‹è¯•é¡¹ | ç»“æœ | å¤‡æ³¨ |
|--------|------|------|
| é…ç½®éªŒè¯å¯åŠ¨æ—¥å¿— | âœ…/âŒ | |
| Dashboard URL è§£æ | âœ…/âŒ | |
| System URL è§£æ | âœ…/âŒ | |
| Agent URL è§£æ | âœ…/âŒ | |

## User Story 2: æ ‡å‡†åŒ–è·¯ç”±åŒæ­¥

| æµ‹è¯•é¡¹ | ç»“æœ | åŠ è½½æ—¶é—´ | å¤‡æ³¨ |
|--------|------|----------|------|
| /system/users ç›´æ¥å¯¼èˆª | âœ…/âŒ | ___ms | |
| /system/roles ç›´æ¥å¯¼èˆª | âœ…/âŒ | ___ms | |
| /agents ç›´æ¥å¯¼èˆª | âœ…/âŒ | ___ms | |
| å¿«é€Ÿåˆ‡æ¢æ— ä¸²å° | âœ…/âŒ | | |
| RouteSync æ—¥å¿—æ­£ç¡® | âœ…/âŒ | | |

## User Story 3: å…±äº«çŠ¶æ€ç®¡ç†

| æµ‹è¯•é¡¹ | ç»“æœ | å¤‡æ³¨ |
|--------|------|------|
| SharedStateManager åˆå§‹åŒ– | âœ…/âŒ | |
| æ— ç›¸å…³é”™è¯¯ | âœ…/âŒ | |

## User Story 4: é”™è¯¯è¾¹ç•Œå’Œé™çº§

| æµ‹è¯•é¡¹ | ç»“æœ | å¤‡æ³¨ |
|--------|------|------|
| åŠ è½½è¶…æ—¶æ£€æµ‹ (5ç§’) | âœ…/âŒ | |
| é”™è¯¯ UI æ˜¾ç¤º | âœ…/âŒ | |
| é‡è¯•æŒ‰é’®åŠŸèƒ½ | âœ…/âŒ | |
| è¿”å›é¦–é¡µæŒ‰é’® | âœ…/âŒ | |
| é”™è¯¯éš”ç¦» | âœ…/âŒ | |
| é”™è¯¯æ—¥å¿—è®°å½• | âœ…/âŒ | |

## å‘ç°çš„é—®é¢˜

1. [å¦‚æœæœ‰é—®é¢˜,åœ¨æ­¤åˆ—å‡º]
2.
3.

## æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | è¾¾æ ‡ |
|------|------|------|------|
| é¦–å±åŠ è½½ | < 3s | ___s | âœ…/âŒ |
| æ·±åº¦è·¯ç”±åŠ è½½ | < 2s | ___s | âœ…/âŒ |
| è·¯ç”±åˆ‡æ¢ | < 500ms | ___ms | âœ…/âŒ |

## æ€»ä½“è¯„ä¼°

- **é€šè¿‡ç‡**: ___%
- **å…³é”®é—®é¢˜**:
- **å»ºè®®**:

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å‡†å¤‡ç”Ÿäº§éƒ¨ç½²
- [ ] ç»§ç»­å®æ–½ User Story 5
```

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ‰€æœ‰é¡¹ç›®å³å¯è®¤ä¸ºæµ‹è¯•é€šè¿‡:

- [ ] æ‰€æœ‰æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] ç™»å½•å’ŒåŸºç¡€å¯¼èˆªæ­£å¸¸
- [ ] é…ç½®éªŒè¯æ—¥å¿—æ­£ç¡®
- [ ] æ‰€æœ‰æ·±åº¦è·¯ç”±ç›´æ¥è®¿é—®æ— ç™½å±
- [ ] å¿«é€Ÿåˆ‡æ¢æ— ä¸²å°
- [ ] SharedStateManager åˆå§‹åŒ–æˆåŠŸ
- [ ] é”™è¯¯è¶…æ—¶æ£€æµ‹å·¥ä½œ
- [ ] é”™è¯¯ UI å’Œé‡è¯•åŠŸèƒ½æ­£å¸¸
- [ ] æµ‹è¯•æŠ¥å‘Šå·²å¡«å†™
- [ ] æ— é˜»å¡æ€§é—®é¢˜

---

## ğŸ› å¸¸è§é—®é¢˜å¿«é€Ÿä¿®å¤

### é—®é¢˜ 1: ç«¯å£å ç”¨
```bash
make kill
make dev
```

### é—®é¢˜ 2: é…ç½®æœªç”Ÿæ•ˆ
```bash
# å®Œå…¨é‡å¯
Ctrl+C
make dev
# ç¡¬åˆ·æ–°æµè§ˆå™¨
Ctrl+Shift+R
```

### é—®é¢˜ 3: çœ‹ä¸åˆ°æ—¥å¿—
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
- åˆ‡æ¢åˆ° Console æ ‡ç­¾
- å¯ç”¨ Preserve log (ä¿ç•™æ—¥å¿—)

### é—®é¢˜ 4: ç™½å±
1. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯
2. æ£€æŸ¥ Network æ ‡ç­¾,ç¡®è®¤èµ„æºåŠ è½½
3. ç¡®è®¤æ‰€æœ‰æœåŠ¡éƒ½åœ¨è¿è¡Œ: `make status`

---

## ğŸ“ éœ€è¦å¸®åŠ©?

å¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜:

1. æŸ¥çœ‹ `TESTING_GUIDE.md` è¯¦ç»†æŒ‡å—
2. æ£€æŸ¥ `TROUBLESHOOTING.md` (å¦‚æœå­˜åœ¨)
3. è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯:
   - æµè§ˆå™¨æ§åˆ¶å°å®Œæ•´æ—¥å¿—
   - æœåŠ¡å™¨ç»ˆç«¯è¾“å‡º
   - å¤ç°æ­¥éª¤

---

**é¢„è®¡æ€»æ—¶é—´**: 30-45 åˆ†é’Ÿ
**å»ºè®®**: é€æ­¥è¿›è¡Œ,å®Œæˆä¸€ä¸ªæ­¥éª¤å†è¿›å…¥ä¸‹ä¸€ä¸ª

**ç¥æµ‹è¯•é¡ºåˆ©! ğŸš€**
