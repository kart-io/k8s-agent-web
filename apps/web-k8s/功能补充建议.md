# web-k8s 功能补充建议

基于 Kubernetes 官方文档分析，对当前 web-k8s 应用的功能覆盖情况进行评估，并提出补充建议。

## 当前功能覆盖情况

### ✅ 已实现的核心功能

#### 工作负载管理 (Workloads)
- ✅ Pods
- ✅ Deployments
- ✅ StatefulSets
- ✅ DaemonSets
- ✅ Jobs
- ✅ CronJobs

#### 网络管理 (Networking)
- ✅ Services
- ✅ Ingress

#### 配置管理 (Configuration)
- ✅ ConfigMaps
- ✅ Secrets

#### 存储管理 (Storage)
- ✅ PersistentVolumes (PV)
- ✅ PersistentVolumeClaims (PVC)
- ✅ StorageClasses
- ✅ 存储概览统计

#### 权限与安全 (RBAC)
- ✅ ServiceAccounts
- ✅ Roles
- ✅ RoleBindings
- ✅ ClusterRoles
- ✅ ClusterRoleBindings

#### 资源配额 (Resource Quotas)
- ✅ ResourceQuotas
- ✅ LimitRanges

#### 集群管理 (Cluster)
- ✅ 多集群管理
- ✅ Nodes (含 Cordon/Uncordon/Drain/Labels/Taints)
- ✅ Namespaces
- ✅ Events

## 功能缺失分析

### 🔴 高优先级缺失功能

#### 1. 工作负载资源

##### 1.1 ReplicaSets 管理
**缺失原因**: 虽然 ReplicaSet 通常由 Deployment 管理，但独立查看和管理 ReplicaSet 仍然重要

**功能需求**:
- ReplicaSet 列表查看
- 副本数查看和修改
- 关联 Pod 查看
- ReplicaSet 详情（包括选择器、模板等）
- 删除操作

**实现建议**:
```typescript
// src/api/k8s/types.ts
export interface ReplicaSet {
  apiVersion: string;
  kind: 'ReplicaSet';
  metadata: K8sMetadata;
  spec: {
    replicas: number;
    selector: {
      matchLabels: Record<string, string>;
    };
    template: {
      metadata: K8sMetadata;
      spec: PodSpec;
    };
  };
  status?: {
    replicas?: number;
    fullyLabeledReplicas?: number;
    readyReplicas?: number;
    availableReplicas?: number;
    observedGeneration?: number;
  };
}
```

**路由位置**: `/k8s/workloads/replicasets`

##### 1.2 ReplicationControllers 管理
**说明**: 虽然已被 Deployment/ReplicaSet 替代，但仍有遗留系统使用

**功能需求**:
- 基础列表和详情查看
- 标注为 "已弃用" 提示用户迁移

**优先级**: 中（可选）

#### 2. 网络资源

##### 2.1 NetworkPolicy 管理
**重要性**: ⭐⭐⭐⭐⭐ (安全核心功能)

**功能需求**:
- NetworkPolicy 列表查看
- 入站规则 (Ingress Rules) 配置
- 出站规则 (Egress Rules) 配置
- Pod 选择器配置
- 命名空间选择器配置
- IP 块配置
- 策略类型选择 (Ingress/Egress)
- **可视化编辑器** (拖拽式规则配置)

**数据模型**:
```typescript
export interface NetworkPolicy {
  apiVersion: string;
  kind: 'NetworkPolicy';
  metadata: K8sMetadata;
  spec: {
    podSelector: {
      matchLabels?: Record<string, string>;
    };
    policyTypes?: ('Ingress' | 'Egress')[];
    ingress?: Array<{
      from?: Array<{
        podSelector?: { matchLabels?: Record<string, string> };
        namespaceSelector?: { matchLabels?: Record<string, string> };
        ipBlock?: { cidr: string; except?: string[] };
      }>;
      ports?: Array<{
        protocol?: 'TCP' | 'UDP' | 'SCTP';
        port?: number | string;
        endPort?: number;
      }>;
    }>;
    egress?: Array<{
      to?: Array<{
        podSelector?: { matchLabels?: Record<string, string> };
        namespaceSelector?: { matchLabels?: Record<string, string> };
        ipBlock?: { cidr: string; except?: string[] };
      }>;
      ports?: Array<{
        protocol?: 'TCP' | 'UDP' | 'SCTP';
        port?: number | string;
        endPort?: number;
      }>;
    }>;
  };
}
```

**路由位置**: `/k8s/network/network-policies`

**UI 特性**:
- 可视化网络拓扑图
- 规则影响范围预览
- 策略冲突检测
- 规则测试工具

##### 2.2 Endpoints / EndpointSlice 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- Endpoints 列表查看
- EndpointSlice 列表查看
- 关联 Service 查看
- 端点地址和端口查看
- 端点健康状态

**数据模型**:
```typescript
export interface Endpoints {
  apiVersion: string;
  kind: 'Endpoints';
  metadata: K8sMetadata;
  subsets?: Array<{
    addresses?: Array<{
      ip: string;
      hostname?: string;
      nodeName?: string;
      targetRef?: {
        kind: string;
        name: string;
        namespace?: string;
        uid?: string;
      };
    }>;
    notReadyAddresses?: Array<{
      ip: string;
      hostname?: string;
      nodeName?: string;
    }>;
    ports?: Array<{
      name?: string;
      port: number;
      protocol?: string;
    }>;
  }>;
}

export interface EndpointSlice {
  apiVersion: string;
  kind: 'EndpointSlice';
  metadata: K8sMetadata;
  addressType: 'IPv4' | 'IPv6' | 'FQDN';
  endpoints: Array<{
    addresses: string[];
    conditions?: {
      ready?: boolean;
      serving?: boolean;
      terminating?: boolean;
    };
    hostname?: string;
    targetRef?: {
      kind: string;
      name: string;
      namespace?: string;
      uid?: string;
    };
    nodeName?: string;
    zone?: string;
  }>;
  ports?: Array<{
    name?: string;
    port?: number;
    protocol?: string;
    appProtocol?: string;
  }>;
}
```

**路由位置**:
- `/k8s/network/endpoints`
- `/k8s/network/endpoint-slices`

##### 2.3 IngressClass 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- IngressClass 列表查看
- 控制器类型查看
- 默认 IngressClass 标记
- 参数配置

**路由位置**: `/k8s/network/ingress-classes`

#### 3. 存储资源

##### 3.1 VolumeSnapshots 管理
**重要性**: ⭐⭐⭐⭐

**功能需求**:
- VolumeSnapshot 列表查看
- 快照创建
- 快照恢复到 PVC
- 快照删除
- 快照类 (VolumeSnapshotClass) 管理
- 快照内容 (VolumeSnapshotContent) 查看

**数据模型**:
```typescript
export interface VolumeSnapshot {
  apiVersion: string;
  kind: 'VolumeSnapshot';
  metadata: K8sMetadata;
  spec: {
    source: {
      persistentVolumeClaimName?: string;
      volumeSnapshotContentName?: string;
    };
    volumeSnapshotClassName?: string;
  };
  status?: {
    boundVolumeSnapshotContentName?: string;
    creationTime?: string;
    readyToUse?: boolean;
    restoreSize?: string;
    error?: {
      message?: string;
      time?: string;
    };
  };
}

export interface VolumeSnapshotClass {
  apiVersion: string;
  kind: 'VolumeSnapshotClass';
  metadata: K8sMetadata;
  driver: string;
  parameters?: Record<string, string>;
  deletionPolicy: 'Delete' | 'Retain';
}
```

**路由位置**:
- `/k8s/storage/volume-snapshots`
- `/k8s/storage/volume-snapshot-classes`

##### 3.2 CSI (Container Storage Interface) 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- CSIDriver 列表查看
- CSINode 信息查看
- CSI 存储能力查看
- 卷附加状态

**路由位置**: `/k8s/storage/csi-drivers`

#### 4. 调度和资源管理

##### 4.1 PriorityClass 管理
**重要性**: ⭐⭐⭐⭐

**功能需求**:
- PriorityClass 列表查看
- 优先级值配置
- 全局默认配置
- 抢占策略配置
- 关联 Pod 查看

**数据模型**:
```typescript
export interface PriorityClass {
  apiVersion: string;
  kind: 'PriorityClass';
  metadata: K8sMetadata;
  value: number;  // 优先级值，越高越优先
  globalDefault?: boolean;
  description?: string;
  preemptionPolicy?: 'Never' | 'PreemptLowerPriority';
}
```

**路由位置**: `/k8s/scheduling/priority-classes`

##### 4.2 Pod 调度详情增强
**功能需求**:
- Pod 亲和性 (Affinity) 查看和配置
- Pod 反亲和性 (Anti-Affinity) 查看和配置
- 节点亲和性 (Node Affinity) 查看和配置
- 容忍度 (Tolerations) 查看和配置
- 拓扑分布约束 (Topology Spread Constraints) 查看和配置

**增强位置**: Pod 详情页面

##### 4.3 RuntimeClass 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- RuntimeClass 列表查看
- 运行时处理器配置
- 调度配置
- 开销配置

**路由位置**: `/k8s/scheduling/runtime-classes`

#### 5. 安全和策略

##### 5.1 PodSecurityPolicy 管理 (已弃用，但仍有使用)
**重要性**: ⭐⭐

**说明**: Kubernetes 1.25+ 已移除 PSP，替代为 Pod Security Admission

**功能需求**:
- 查看现有 PSP (仅适用于旧版本集群)
- 显示迁移提示

##### 5.2 Pod Security Standards 查看
**重要性**: ⭐⭐⭐⭐

**功能需求**:
- 命名空间的 Pod Security 标签查看
- 安全等级 (Privileged/Baseline/Restricted) 配置
- 模式 (enforce/audit/warn) 配置
- 版本配置

**增强位置**: Namespace 管理页面

##### 5.3 Certificate 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- CertificateSigningRequest (CSR) 列表查看
- CSR 批准/拒绝
- 证书查看
- 过期时间提醒

**数据模型**:
```typescript
export interface CertificateSigningRequest {
  apiVersion: string;
  kind: 'CertificateSigningRequest';
  metadata: K8sMetadata;
  spec: {
    request: string;  // Base64 编码的证书请求
    signerName: string;
    expirationSeconds?: number;
    usages?: string[];
  };
  status?: {
    certificate?: string;  // Base64 编码的证书
    conditions?: Array<{
      type: string;
      status: string;
      reason?: string;
      message?: string;
      lastUpdateTime?: string;
    }>;
  };
}
```

**路由位置**: `/k8s/security/certificates`

#### 6. 自动扩缩容

##### 6.1 HorizontalPodAutoscaler (HPA) 管理
**重要性**: ⭐⭐⭐⭐⭐

**功能需求**:
- HPA 列表查看
- HPA 创建/编辑/删除
- 目标资源配置
- 指标配置 (CPU/内存/自定义指标)
- 最小/最大副本数配置
- 扩缩容行为配置
- 当前状态和历史记录查看

**数据模型**:
```typescript
export interface HorizontalPodAutoscaler {
  apiVersion: string;
  kind: 'HorizontalPodAutoscaler';
  metadata: K8sMetadata;
  spec: {
    scaleTargetRef: {
      apiVersion: string;
      kind: string;
      name: string;
    };
    minReplicas?: number;
    maxReplicas: number;
    metrics?: Array<{
      type: 'Resource' | 'Pods' | 'Object' | 'External' | 'ContainerResource';
      resource?: {
        name: string;
        target: {
          type: 'Utilization' | 'Value' | 'AverageValue';
          averageUtilization?: number;
          averageValue?: string;
          value?: string;
        };
      };
    }>;
    behavior?: {
      scaleDown?: {
        stabilizationWindowSeconds?: number;
        policies?: Array<{
          type: 'Pods' | 'Percent';
          value: number;
          periodSeconds: number;
        }>;
      };
      scaleUp?: {
        stabilizationWindowSeconds?: number;
        policies?: Array<{
          type: 'Pods' | 'Percent';
          value: number;
          periodSeconds: number;
        }>;
      };
    };
  };
  status?: {
    currentReplicas: number;
    desiredReplicas: number;
    currentMetrics?: any[];
    conditions?: Array<{
      type: string;
      status: string;
      reason?: string;
      message?: string;
      lastTransitionTime?: string;
    }>;
  };
}
```

**路由位置**: `/k8s/autoscaling/horizontal-pod-autoscalers`

##### 6.2 VerticalPodAutoscaler (VPA) 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- VPA 列表查看
- VPA 创建/编辑/删除
- 更新模式配置 (Off/Initial/Recreate/Auto)
- 资源策略配置
- 推荐值查看

**路由位置**: `/k8s/autoscaling/vertical-pod-autoscalers`

#### 7. 高级配置

##### 7.1 自定义资源定义 (CRD) 管理
**重要性**: ⭐⭐⭐⭐⭐

**功能需求**:
- CRD 列表查看
- CRD 详情查看 (包括 Schema、版本等)
- CRD 创建/删除
- 自定义资源 (CR) 列表查看
- 自定义资源 CRUD 操作
- YAML 编辑器

**数据模型**:
```typescript
export interface CustomResourceDefinition {
  apiVersion: string;
  kind: 'CustomResourceDefinition';
  metadata: K8sMetadata;
  spec: {
    group: string;
    names: {
      plural: string;
      singular?: string;
      shortNames?: string[];
      kind: string;
      listKind?: string;
    };
    scope: 'Namespaced' | 'Cluster';
    versions: Array<{
      name: string;
      served: boolean;
      storage: boolean;
      schema?: {
        openAPIV3Schema: any;
      };
      subresources?: {
        status?: {};
        scale?: {
          specReplicasPath: string;
          statusReplicasPath: string;
        };
      };
    }>;
  };
}
```

**路由位置**:
- `/k8s/extend/custom-resource-definitions`
- `/k8s/extend/custom-resources/{group}/{version}/{kind}`

##### 7.2 MutatingWebhookConfiguration 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- Webhook 列表查看
- Webhook 配置查看和编辑
- 规则配置
- 失败策略配置

**路由位置**: `/k8s/extend/mutating-webhooks`

##### 7.3 ValidatingWebhookConfiguration 管理
**重要性**: ⭐⭐⭐

**功能需求**:
- Webhook 列表查看
- Webhook 配置查看和编辑
- 规则配置
- 失败策略配置

**路由位置**: `/k8s/extend/validating-webhooks`

#### 8. 监控和可观测性

##### 8.1 资源监控增强
**功能需求**:
- 实时 CPU/内存使用率图表 (Metrics API)
- Pod/Node 资源使用趋势
- 资源使用 Top N 排行
- 资源使用告警

**技术实现**:
- 集成 Metrics Server API
- 使用 ECharts 或 Chart.js 绘制图表
- WebSocket 实时更新

**增强位置**: Dashboard、Pod 详情、Node 详情

##### 8.2 Pod 日志增强
**功能需求**:
- 多容器日志切换
- 日志过滤和搜索
- 日志下载
- 日志流式查看 (Follow)
- 时间范围筛选
- 日志高亮

**增强位置**: Pod 日志抽屉

##### 8.3 Pod 终端 (Exec) 功能
**重要性**: ⭐⭐⭐⭐⭐

**功能需求**:
- Web 终端集成 (xterm.js)
- 多容器选择
- 终端会话管理
- 复制/粘贴支持
- 全屏模式

**技术实现**:
```typescript
// WebSocket 连接 Pod exec
const ws = new WebSocket(
  `wss://api-server/k8s/clusters/${clusterId}/namespaces/${namespace}/pods/${podName}/exec`
);

// 使用 xterm.js
import { Terminal } from 'xterm';
const terminal = new Terminal();
terminal.open(document.getElementById('terminal'));
```

**增强位置**: Pod 操作菜单

#### 9. 应用管理

##### 9.1 Helm Chart 管理
**重要性**: ⭐⭐⭐⭐⭐

**功能需求**:
- Helm Release 列表查看
- Release 安装/升级/回滚/删除
- Chart 仓库管理
- Values 可视化编辑
- Release 历史查看
- Chart 模板预览

**路由位置**: `/k8s/apps/helm-releases`

##### 9.2 Kustomize 支持
**重要性**: ⭐⭐⭐

**功能需求**:
- Kustomization 文件管理
- 资源生成预览
- 应用部署

**路由位置**: `/k8s/apps/kustomize`

### 🟡 中优先级缺失功能

#### 10. 集群管理增强

##### 10.1 API 资源浏览
**功能需求**:
- API 组列表查看
- API 资源列表查看
- API 版本查看
- 资源 Schema 查看

**路由位置**: `/k8s/cluster/api-resources`

##### 10.2 集群信息增强
**功能需求**:
- Kubernetes 版本详情
- 组件版本 (kube-apiserver, kube-controller-manager, kube-scheduler, etcd)
- 集群容量统计
- 集群健康检查

**增强位置**: 集群详情页面

##### 10.3 审计日志查看
**重要性**: ⭐⭐⭐⭐

**功能需求**:
- 审计事件列表
- 用户操作追踪
- 资源变更历史
- 时间范围筛选
- 操作类型筛选

**路由位置**: `/k8s/cluster/audit-logs`

#### 11. 工作负载增强

##### 11.1 Pod 故障排查工具
**功能需求**:
- Pod 事件时间线
- 容器重启历史
- 资源限制检查
- 网络连通性测试
- 存储挂载状态检查

**增强位置**: Pod 详情页面

##### 11.2 Deployment 滚动更新管理
**功能需求**:
- 滚动更新进度可视化
- 更新暂停/恢复
- 更新回滚
- 更新历史查看
- ReplicaSet 版本对比

**增强位置**: Deployment 详情页面

#### 12. 配置管理增强

##### 12.1 环境变量管理
**功能需求**:
- 环境变量统一查看
- ConfigMap/Secret 引用关系
- 环境变量冲突检测

**路由位置**: `/k8s/config/environment-variables`

##### 12.2 资源模板
**功能需求**:
- 常用资源模板库
- 自定义模板
- 模板参数化
- 一键部署

**路由位置**: `/k8s/templates`

### 🟢 低优先级功能

#### 13. 用户体验增强

##### 13.1 资源拓扑图
**功能需求**:
- Pod 依赖关系可视化
- Service 到 Pod 映射
- ConfigMap/Secret 引用关系
- 网络策略可视化

**路由位置**: `/k8s/topology`

##### 13.2 资源对比工具
**功能需求**:
- YAML 对比
- 配置差异高亮
- 历史版本对比

**路由位置**: 各资源详情页面

##### 13.3 批量操作
**功能需求**:
- 批量删除
- 批量标签修改
- 批量命名空间切换

**增强位置**: 各资源列表页面

##### 13.4 资源导出
**功能需求**:
- YAML 导出
- JSON 导出
- 批量导出
- 导出为 Helm Chart

**增强位置**: 各资源详情页面

#### 14. 集成功能

##### 14.1 Git 集成 (GitOps)
**功能需求**:
- Git 仓库关联
- 自动同步
- 变更审计
- ArgoCD/Flux CD 集成

**路由位置**: `/k8s/gitops`

##### 14.2 CI/CD 集成
**功能需求**:
- Pipeline 查看
- 构建历史
- 部署触发

**路由位置**: `/k8s/cicd`

##### 14.3 成本分析
**功能需求**:
- 资源成本统计
- 按命名空间/标签分组
- 成本趋势分析
- 资源优化建议

**路由位置**: `/k8s/cost-analysis`

## 实现优先级建议

### 第一阶段 (高优先级，立即实施)

**目标**: 补充核心功能，提升安全性和可用性

1. **NetworkPolicy 管理** - 安全核心
2. **HorizontalPodAutoscaler (HPA)** - 自动扩缩容
3. **Pod 终端 (Exec)** - 运维必备
4. **资源监控增强** - 实时监控
5. **PriorityClass 管理** - 调度优化

**预计工作量**: 3-4 周

### 第二阶段 (中高优先级，近期实施)

**目标**: 完善资源管理，增强存储和网络能力

1. **VolumeSnapshots 管理** - 数据备份恢复
2. **CRD 和 CR 管理** - 扩展性
3. **Endpoints/EndpointSlice** - 网络调试
4. **ReplicaSets 管理** - 资源完整性
5. **Certificate 管理** - 安全证书
6. **审计日志查看** - 安全审计

**预计工作量**: 4-5 周

### 第三阶段 (中优先级，中期实施)

**目标**: 应用管理和高级功能

1. **Helm Chart 管理** - 应用部署
2. **Pod 调度详情增强** - 调度优化
3. **VPA 管理** - 垂直扩缩容
4. **RuntimeClass 管理** - 运行时管理
5. **Pod 日志增强** - 日志分析
6. **Pod 故障排查工具** - 运维工具

**预计工作量**: 5-6 周

### 第四阶段 (低优先级，长期规划)

**目标**: 用户体验和集成功能

1. **资源拓扑图** - 可视化
2. **GitOps 集成** - 自动化部署
3. **成本分析** - 资源优化
4. **资源模板** - 快速部署
5. **批量操作** - 效率提升

**预计工作量**: 6-8 周

## 技术实现建议

### 1. API 扩展

**新增 API 资源**:
```typescript
// src/api/k8s/types.ts 新增类型
export interface NetworkPolicy { /* ... */ }
export interface HorizontalPodAutoscaler { /* ... */ }
export interface VolumeSnapshot { /* ... */ }
export interface CustomResourceDefinition { /* ... */ }
export interface PriorityClass { /* ... */ }
// ... 更多类型

// src/api/k8s/index.ts 新增 API
export const networkPolicyApi = createResourceApi<NetworkPolicy>(/*...*/);
export const hpaApi = createResourceApi<HorizontalPodAutoscaler>(/*...*/);
export const volumeSnapshotApi = createResourceApi<VolumeSnapshot>(/*...*/);
// ... 更多 API
```

### 2. 路由扩展

**新增路由模块**:
```typescript
// src/router/routes/modules/k8s.ts 扩展

// 自动扩缩容模块
{
  meta: { icon: 'lucide:trending-up', title: '自动扩缩容' },
  name: 'K8sAutoscaling',
  path: 'autoscaling',
  redirect: '/k8s/autoscaling/hpa',
  children: [
    {
      name: 'K8sHPA',
      path: 'hpa',
      component: () => import('#/views/k8s/autoscaling/hpa/index.vue'),
      meta: { icon: 'lucide:trending-up', title: 'HPA' },
    },
    {
      name: 'K8sVPA',
      path: 'vpa',
      component: () => import('#/views/k8s/autoscaling/vpa/index.vue'),
      meta: { icon: 'lucide:bar-chart-2', title: 'VPA' },
    },
  ],
}

// 调度模块
{
  meta: { icon: 'lucide:calendar', title: '调度' },
  name: 'K8sScheduling',
  path: 'scheduling',
  redirect: '/k8s/scheduling/priority-classes',
  children: [
    {
      name: 'K8sPriorityClasses',
      path: 'priority-classes',
      component: () => import('#/views/k8s/scheduling/priority-classes/index.vue'),
      meta: { icon: 'lucide:star', title: 'PriorityClass' },
    },
    {
      name: 'K8sRuntimeClasses',
      path: 'runtime-classes',
      component: () => import('#/views/k8s/scheduling/runtime-classes/index.vue'),
      meta: { icon: 'lucide:cpu', title: 'RuntimeClass' },
    },
  ],
}

// 扩展资源模块
{
  meta: { icon: 'lucide:puzzle', title: '扩展' },
  name: 'K8sExtend',
  path: 'extend',
  redirect: '/k8s/extend/crds',
  children: [
    {
      name: 'K8sCRDs',
      path: 'crds',
      component: () => import('#/views/k8s/extend/crds/index.vue'),
      meta: { icon: 'lucide:box', title: 'CRD' },
    },
    {
      name: 'K8sCustomResources',
      path: 'custom-resources/:group/:version/:kind',
      component: () => import('#/views/k8s/extend/custom-resources/index.vue'),
      meta: { hideInMenu: true, title: '自定义资源' },
    },
  ],
}

// 应用管理模块
{
  meta: { icon: 'lucide:package', title: '应用' },
  name: 'K8sApps',
  path: 'apps',
  redirect: '/k8s/apps/helm-releases',
  children: [
    {
      name: 'K8sHelmReleases',
      path: 'helm-releases',
      component: () => import('#/views/k8s/apps/helm-releases/index.vue'),
      meta: { icon: 'lucide:package-2', title: 'Helm Releases' },
    },
  ],
}

// 安全模块
{
  meta: { icon: 'lucide:shield-check', title: '安全' },
  name: 'K8sSecurity',
  path: 'security',
  redirect: '/k8s/security/certificates',
  children: [
    {
      name: 'K8sCertificates',
      path: 'certificates',
      component: () => import('#/views/k8s/security/certificates/index.vue'),
      meta: { icon: 'lucide:file-certificate', title: 'Certificates' },
    },
  ],
}
```

### 3. 组件复用

**利用现有通用组件**:
- `ResourceList.vue` - 列表页面
- `ResourceFilter.vue` - 筛选器
- `StatusTag.vue` - 状态标签
- `YAMLEditorModal.vue` - YAML 编辑
- `DeleteConfirmModal.vue` - 删除确认

**新增通用组件**:
```typescript
// src/views/k8s/_shared/TerminalModal.vue
// Web 终端组件 (基于 xterm.js)

// src/views/k8s/_shared/MetricsChart.vue
// 资源监控图表组件 (基于 ECharts)

// src/views/k8s/_shared/NetworkPolicyEditor.vue
// 网络策略可视化编辑器

// src/views/k8s/_shared/TopologyGraph.vue
// 资源拓扑图组件 (基于 G6 或 D3.js)
```

### 4. 依赖库建议

**新增依赖**:
```json
{
  "dependencies": {
    "xterm": "^5.3.0",                    // Web 终端
    "xterm-addon-fit": "^0.8.0",          // 终端适配
    "xterm-addon-web-links": "^0.9.0",    // 终端链接
    "echarts": "^5.6.0",                  // 图表库 (已有)
    "@antv/g6": "^4.8.0",                 // 拓扑图 (可选)
    "yaml": "^2.4.0",                     // YAML 解析增强
    "monaco-editor": "^0.47.0",           // 代码编辑器 (可选，替代当前 YAML 编辑器)
    "diff": "^7.0.0"                      // 差异对比
  }
}
```

### 5. Mock 数据扩展

**新增 Mock 函数**:
```typescript
// src/api/k8s/mock.ts

export function getMockNetworkPolicyList(params: NetworkPolicyListParams) { /* ... */ }
export function getMockHPAList(params: HPAListParams) { /* ... */ }
export function getMockVolumeSnapshotList(params: VolumeSnapshotListParams) { /* ... */ }
export function getMockCRDList(params: CRDListParams) { /* ... */ }
export function getMockPriorityClassList(params: PriorityClassListParams) { /* ... */ }
// ... 更多 Mock 函数
```

## 实施建议

### 开发流程

1. **类型定义** → `src/api/k8s/types.ts`
2. **API 实现** → `src/api/k8s/index.ts`
3. **Mock 数据** → `src/api/k8s/mock.ts`
4. **路由配置** → `src/router/routes/modules/k8s.ts`
5. **页面开发** → `src/views/k8s/{module}/{resource}/index.vue`
6. **组件开发** → 详情抽屉、编辑模态框等
7. **国际化** → `src/locales/`
8. **测试验证** → 单元测试、E2E 测试

### 质量保证

- **TypeScript 严格模式**: 确保类型安全
- **ESLint 检查**: 代码规范
- **组件测试**: Vitest 单元测试
- **E2E 测试**: Playwright 测试关键流程
- **代码审查**: PR Review 流程
- **文档更新**: 同步更新功能文档

### 性能考虑

- **虚拟滚动**: 大列表使用 VXE Table 虚拟滚动
- **懒加载**: 路由和组件按需加载
- **数据缓存**: 合理使用 Pinia 缓存
- **WebSocket 优化**: 实时数据连接管理
- **Bundle 优化**: 代码分割和 Tree Shaking

## 总结

当前 web-k8s 应用已经实现了 **Kubernetes 核心资源的 60-70%** 管理功能，涵盖了工作负载、网络、存储、权限、配额等主要模块。

### 关键缺失功能

1. **NetworkPolicy** (网络安全)
2. **HPA/VPA** (自动扩缩容)
3. **Pod 终端** (运维必备)
4. **资源监控** (可观测性)
5. **Helm 管理** (应用部署)
6. **CRD 管理** (扩展性)

### 优势

- ✅ 配置驱动架构，易于扩展
- ✅ 完善的类型系统
- ✅ 通用组件库
- ✅ Mock 数据支持
- ✅ 国际化支持

### 改进建议

按照优先级分阶段实施，先补充高优先级的核心功能（NetworkPolicy、HPA、Pod Exec、监控），再逐步完善中低优先级功能。预计 **4-6 个月** 可以完成大部分补充功能，达到 **90%+** 的 Kubernetes 资源覆盖率。

## 参考资源

- [Kubernetes 官方文档](https://kubernetes.io/zh-cn/docs/)
- [Kubernetes API 参考](https://kubernetes.io/docs/reference/kubernetes-api/)
- [Kubernetes Dashboard](https://github.com/kubernetes/dashboard)
- [Lens IDE](https://k8slens.dev/)
- [K9s](https://k9scli.io/)
