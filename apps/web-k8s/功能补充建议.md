# web-k8s åŠŸèƒ½è¡¥å……å»ºè®®

åŸºäº Kubernetes å®˜æ–¹æ–‡æ¡£åˆ†æï¼Œå¯¹å½“å‰ web-k8s åº”ç”¨çš„åŠŸèƒ½è¦†ç›–æƒ…å†µè¿›è¡Œè¯„ä¼°ï¼Œå¹¶æå‡ºè¡¥å……å»ºè®®ã€‚

## å½“å‰åŠŸèƒ½è¦†ç›–æƒ…å†µ

### âœ… å·²å®ç°çš„æ ¸å¿ƒåŠŸèƒ½

#### å·¥ä½œè´Ÿè½½ç®¡ç† (Workloads)
- âœ… Pods
- âœ… Deployments
- âœ… StatefulSets
- âœ… DaemonSets
- âœ… Jobs
- âœ… CronJobs

#### ç½‘ç»œç®¡ç† (Networking)
- âœ… Services
- âœ… Ingress

#### é…ç½®ç®¡ç† (Configuration)
- âœ… ConfigMaps
- âœ… Secrets

#### å­˜å‚¨ç®¡ç† (Storage)
- âœ… PersistentVolumes (PV)
- âœ… PersistentVolumeClaims (PVC)
- âœ… StorageClasses
- âœ… å­˜å‚¨æ¦‚è§ˆç»Ÿè®¡

#### æƒé™ä¸å®‰å…¨ (RBAC)
- âœ… ServiceAccounts
- âœ… Roles
- âœ… RoleBindings
- âœ… ClusterRoles
- âœ… ClusterRoleBindings

#### èµ„æºé…é¢ (Resource Quotas)
- âœ… ResourceQuotas
- âœ… LimitRanges

#### é›†ç¾¤ç®¡ç† (Cluster)
- âœ… å¤šé›†ç¾¤ç®¡ç†
- âœ… Nodes (å« Cordon/Uncordon/Drain/Labels/Taints)
- âœ… Namespaces
- âœ… Events

## åŠŸèƒ½ç¼ºå¤±åˆ†æ

### ğŸ”´ é«˜ä¼˜å…ˆçº§ç¼ºå¤±åŠŸèƒ½

#### 1. å·¥ä½œè´Ÿè½½èµ„æº

##### 1.1 ReplicaSets ç®¡ç†
**ç¼ºå¤±åŸå› **: è™½ç„¶ ReplicaSet é€šå¸¸ç”± Deployment ç®¡ç†ï¼Œä½†ç‹¬ç«‹æŸ¥çœ‹å’Œç®¡ç† ReplicaSet ä»ç„¶é‡è¦

**åŠŸèƒ½éœ€æ±‚**:
- ReplicaSet åˆ—è¡¨æŸ¥çœ‹
- å‰¯æœ¬æ•°æŸ¥çœ‹å’Œä¿®æ”¹
- å…³è” Pod æŸ¥çœ‹
- ReplicaSet è¯¦æƒ…ï¼ˆåŒ…æ‹¬é€‰æ‹©å™¨ã€æ¨¡æ¿ç­‰ï¼‰
- åˆ é™¤æ“ä½œ

**å®ç°å»ºè®®**:
```typescript
// src/api/k8s/types.ts
export interface ReplicaSet {
  apiVersion: string;
  kind: 'ReplicaSet';
  metadata: K8sMetadata;
  spec: {
    replicas: number;
    selector: {
      matchLabels: Record<string, string>;
    };
    template: {
      metadata: K8sMetadata;
      spec: PodSpec;
    };
  };
  status?: {
    replicas?: number;
    fullyLabeledReplicas?: number;
    readyReplicas?: number;
    availableReplicas?: number;
    observedGeneration?: number;
  };
}
```

**è·¯ç”±ä½ç½®**: `/k8s/workloads/replicasets`

##### 1.2 ReplicationControllers ç®¡ç†
**è¯´æ˜**: è™½ç„¶å·²è¢« Deployment/ReplicaSet æ›¿ä»£ï¼Œä½†ä»æœ‰é—ç•™ç³»ç»Ÿä½¿ç”¨

**åŠŸèƒ½éœ€æ±‚**:
- åŸºç¡€åˆ—è¡¨å’Œè¯¦æƒ…æŸ¥çœ‹
- æ ‡æ³¨ä¸º "å·²å¼ƒç”¨" æç¤ºç”¨æˆ·è¿ç§»

**ä¼˜å…ˆçº§**: ä¸­ï¼ˆå¯é€‰ï¼‰

#### 2. ç½‘ç»œèµ„æº

##### 2.1 NetworkPolicy ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­â­ (å®‰å…¨æ ¸å¿ƒåŠŸèƒ½)

**åŠŸèƒ½éœ€æ±‚**:
- NetworkPolicy åˆ—è¡¨æŸ¥çœ‹
- å…¥ç«™è§„åˆ™ (Ingress Rules) é…ç½®
- å‡ºç«™è§„åˆ™ (Egress Rules) é…ç½®
- Pod é€‰æ‹©å™¨é…ç½®
- å‘½åç©ºé—´é€‰æ‹©å™¨é…ç½®
- IP å—é…ç½®
- ç­–ç•¥ç±»å‹é€‰æ‹© (Ingress/Egress)
- **å¯è§†åŒ–ç¼–è¾‘å™¨** (æ‹–æ‹½å¼è§„åˆ™é…ç½®)

**æ•°æ®æ¨¡å‹**:
```typescript
export interface NetworkPolicy {
  apiVersion: string;
  kind: 'NetworkPolicy';
  metadata: K8sMetadata;
  spec: {
    podSelector: {
      matchLabels?: Record<string, string>;
    };
    policyTypes?: ('Ingress' | 'Egress')[];
    ingress?: Array<{
      from?: Array<{
        podSelector?: { matchLabels?: Record<string, string> };
        namespaceSelector?: { matchLabels?: Record<string, string> };
        ipBlock?: { cidr: string; except?: string[] };
      }>;
      ports?: Array<{
        protocol?: 'TCP' | 'UDP' | 'SCTP';
        port?: number | string;
        endPort?: number;
      }>;
    }>;
    egress?: Array<{
      to?: Array<{
        podSelector?: { matchLabels?: Record<string, string> };
        namespaceSelector?: { matchLabels?: Record<string, string> };
        ipBlock?: { cidr: string; except?: string[] };
      }>;
      ports?: Array<{
        protocol?: 'TCP' | 'UDP' | 'SCTP';
        port?: number | string;
        endPort?: number;
      }>;
    }>;
  };
}
```

**è·¯ç”±ä½ç½®**: `/k8s/network/network-policies`

**UI ç‰¹æ€§**:
- å¯è§†åŒ–ç½‘ç»œæ‹“æ‰‘å›¾
- è§„åˆ™å½±å“èŒƒå›´é¢„è§ˆ
- ç­–ç•¥å†²çªæ£€æµ‹
- è§„åˆ™æµ‹è¯•å·¥å…·

##### 2.2 Endpoints / EndpointSlice ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Endpoints åˆ—è¡¨æŸ¥çœ‹
- EndpointSlice åˆ—è¡¨æŸ¥çœ‹
- å…³è” Service æŸ¥çœ‹
- ç«¯ç‚¹åœ°å€å’Œç«¯å£æŸ¥çœ‹
- ç«¯ç‚¹å¥åº·çŠ¶æ€

**æ•°æ®æ¨¡å‹**:
```typescript
export interface Endpoints {
  apiVersion: string;
  kind: 'Endpoints';
  metadata: K8sMetadata;
  subsets?: Array<{
    addresses?: Array<{
      ip: string;
      hostname?: string;
      nodeName?: string;
      targetRef?: {
        kind: string;
        name: string;
        namespace?: string;
        uid?: string;
      };
    }>;
    notReadyAddresses?: Array<{
      ip: string;
      hostname?: string;
      nodeName?: string;
    }>;
    ports?: Array<{
      name?: string;
      port: number;
      protocol?: string;
    }>;
  }>;
}

export interface EndpointSlice {
  apiVersion: string;
  kind: 'EndpointSlice';
  metadata: K8sMetadata;
  addressType: 'IPv4' | 'IPv6' | 'FQDN';
  endpoints: Array<{
    addresses: string[];
    conditions?: {
      ready?: boolean;
      serving?: boolean;
      terminating?: boolean;
    };
    hostname?: string;
    targetRef?: {
      kind: string;
      name: string;
      namespace?: string;
      uid?: string;
    };
    nodeName?: string;
    zone?: string;
  }>;
  ports?: Array<{
    name?: string;
    port?: number;
    protocol?: string;
    appProtocol?: string;
  }>;
}
```

**è·¯ç”±ä½ç½®**:
- `/k8s/network/endpoints`
- `/k8s/network/endpoint-slices`

##### 2.3 IngressClass ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- IngressClass åˆ—è¡¨æŸ¥çœ‹
- æ§åˆ¶å™¨ç±»å‹æŸ¥çœ‹
- é»˜è®¤ IngressClass æ ‡è®°
- å‚æ•°é…ç½®

**è·¯ç”±ä½ç½®**: `/k8s/network/ingress-classes`

#### 3. å­˜å‚¨èµ„æº

##### 3.1 VolumeSnapshots ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- VolumeSnapshot åˆ—è¡¨æŸ¥çœ‹
- å¿«ç…§åˆ›å»º
- å¿«ç…§æ¢å¤åˆ° PVC
- å¿«ç…§åˆ é™¤
- å¿«ç…§ç±» (VolumeSnapshotClass) ç®¡ç†
- å¿«ç…§å†…å®¹ (VolumeSnapshotContent) æŸ¥çœ‹

**æ•°æ®æ¨¡å‹**:
```typescript
export interface VolumeSnapshot {
  apiVersion: string;
  kind: 'VolumeSnapshot';
  metadata: K8sMetadata;
  spec: {
    source: {
      persistentVolumeClaimName?: string;
      volumeSnapshotContentName?: string;
    };
    volumeSnapshotClassName?: string;
  };
  status?: {
    boundVolumeSnapshotContentName?: string;
    creationTime?: string;
    readyToUse?: boolean;
    restoreSize?: string;
    error?: {
      message?: string;
      time?: string;
    };
  };
}

export interface VolumeSnapshotClass {
  apiVersion: string;
  kind: 'VolumeSnapshotClass';
  metadata: K8sMetadata;
  driver: string;
  parameters?: Record<string, string>;
  deletionPolicy: 'Delete' | 'Retain';
}
```

**è·¯ç”±ä½ç½®**:
- `/k8s/storage/volume-snapshots`
- `/k8s/storage/volume-snapshot-classes`

##### 3.2 CSI (Container Storage Interface) ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- CSIDriver åˆ—è¡¨æŸ¥çœ‹
- CSINode ä¿¡æ¯æŸ¥çœ‹
- CSI å­˜å‚¨èƒ½åŠ›æŸ¥çœ‹
- å·é™„åŠ çŠ¶æ€

**è·¯ç”±ä½ç½®**: `/k8s/storage/csi-drivers`

#### 4. è°ƒåº¦å’Œèµ„æºç®¡ç†

##### 4.1 PriorityClass ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- PriorityClass åˆ—è¡¨æŸ¥çœ‹
- ä¼˜å…ˆçº§å€¼é…ç½®
- å…¨å±€é»˜è®¤é…ç½®
- æŠ¢å ç­–ç•¥é…ç½®
- å…³è” Pod æŸ¥çœ‹

**æ•°æ®æ¨¡å‹**:
```typescript
export interface PriorityClass {
  apiVersion: string;
  kind: 'PriorityClass';
  metadata: K8sMetadata;
  value: number;  // ä¼˜å…ˆçº§å€¼ï¼Œè¶Šé«˜è¶Šä¼˜å…ˆ
  globalDefault?: boolean;
  description?: string;
  preemptionPolicy?: 'Never' | 'PreemptLowerPriority';
}
```

**è·¯ç”±ä½ç½®**: `/k8s/scheduling/priority-classes`

##### 4.2 Pod è°ƒåº¦è¯¦æƒ…å¢å¼º
**åŠŸèƒ½éœ€æ±‚**:
- Pod äº²å’Œæ€§ (Affinity) æŸ¥çœ‹å’Œé…ç½®
- Pod åäº²å’Œæ€§ (Anti-Affinity) æŸ¥çœ‹å’Œé…ç½®
- èŠ‚ç‚¹äº²å’Œæ€§ (Node Affinity) æŸ¥çœ‹å’Œé…ç½®
- å®¹å¿åº¦ (Tolerations) æŸ¥çœ‹å’Œé…ç½®
- æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ (Topology Spread Constraints) æŸ¥çœ‹å’Œé…ç½®

**å¢å¼ºä½ç½®**: Pod è¯¦æƒ…é¡µé¢

##### 4.3 RuntimeClass ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- RuntimeClass åˆ—è¡¨æŸ¥çœ‹
- è¿è¡Œæ—¶å¤„ç†å™¨é…ç½®
- è°ƒåº¦é…ç½®
- å¼€é”€é…ç½®

**è·¯ç”±ä½ç½®**: `/k8s/scheduling/runtime-classes`

#### 5. å®‰å…¨å’Œç­–ç•¥

##### 5.1 PodSecurityPolicy ç®¡ç† (å·²å¼ƒç”¨ï¼Œä½†ä»æœ‰ä½¿ç”¨)
**é‡è¦æ€§**: â­â­

**è¯´æ˜**: Kubernetes 1.25+ å·²ç§»é™¤ PSPï¼Œæ›¿ä»£ä¸º Pod Security Admission

**åŠŸèƒ½éœ€æ±‚**:
- æŸ¥çœ‹ç°æœ‰ PSP (ä»…é€‚ç”¨äºæ—§ç‰ˆæœ¬é›†ç¾¤)
- æ˜¾ç¤ºè¿ç§»æç¤º

##### 5.2 Pod Security Standards æŸ¥çœ‹
**é‡è¦æ€§**: â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- å‘½åç©ºé—´çš„ Pod Security æ ‡ç­¾æŸ¥çœ‹
- å®‰å…¨ç­‰çº§ (Privileged/Baseline/Restricted) é…ç½®
- æ¨¡å¼ (enforce/audit/warn) é…ç½®
- ç‰ˆæœ¬é…ç½®

**å¢å¼ºä½ç½®**: Namespace ç®¡ç†é¡µé¢

##### 5.3 Certificate ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- CertificateSigningRequest (CSR) åˆ—è¡¨æŸ¥çœ‹
- CSR æ‰¹å‡†/æ‹’ç»
- è¯ä¹¦æŸ¥çœ‹
- è¿‡æœŸæ—¶é—´æé†’

**æ•°æ®æ¨¡å‹**:
```typescript
export interface CertificateSigningRequest {
  apiVersion: string;
  kind: 'CertificateSigningRequest';
  metadata: K8sMetadata;
  spec: {
    request: string;  // Base64 ç¼–ç çš„è¯ä¹¦è¯·æ±‚
    signerName: string;
    expirationSeconds?: number;
    usages?: string[];
  };
  status?: {
    certificate?: string;  // Base64 ç¼–ç çš„è¯ä¹¦
    conditions?: Array<{
      type: string;
      status: string;
      reason?: string;
      message?: string;
      lastUpdateTime?: string;
    }>;
  };
}
```

**è·¯ç”±ä½ç½®**: `/k8s/security/certificates`

#### 6. è‡ªåŠ¨æ‰©ç¼©å®¹

##### 6.1 HorizontalPodAutoscaler (HPA) ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- HPA åˆ—è¡¨æŸ¥çœ‹
- HPA åˆ›å»º/ç¼–è¾‘/åˆ é™¤
- ç›®æ ‡èµ„æºé…ç½®
- æŒ‡æ ‡é…ç½® (CPU/å†…å­˜/è‡ªå®šä¹‰æŒ‡æ ‡)
- æœ€å°/æœ€å¤§å‰¯æœ¬æ•°é…ç½®
- æ‰©ç¼©å®¹è¡Œä¸ºé…ç½®
- å½“å‰çŠ¶æ€å’Œå†å²è®°å½•æŸ¥çœ‹

**æ•°æ®æ¨¡å‹**:
```typescript
export interface HorizontalPodAutoscaler {
  apiVersion: string;
  kind: 'HorizontalPodAutoscaler';
  metadata: K8sMetadata;
  spec: {
    scaleTargetRef: {
      apiVersion: string;
      kind: string;
      name: string;
    };
    minReplicas?: number;
    maxReplicas: number;
    metrics?: Array<{
      type: 'Resource' | 'Pods' | 'Object' | 'External' | 'ContainerResource';
      resource?: {
        name: string;
        target: {
          type: 'Utilization' | 'Value' | 'AverageValue';
          averageUtilization?: number;
          averageValue?: string;
          value?: string;
        };
      };
    }>;
    behavior?: {
      scaleDown?: {
        stabilizationWindowSeconds?: number;
        policies?: Array<{
          type: 'Pods' | 'Percent';
          value: number;
          periodSeconds: number;
        }>;
      };
      scaleUp?: {
        stabilizationWindowSeconds?: number;
        policies?: Array<{
          type: 'Pods' | 'Percent';
          value: number;
          periodSeconds: number;
        }>;
      };
    };
  };
  status?: {
    currentReplicas: number;
    desiredReplicas: number;
    currentMetrics?: any[];
    conditions?: Array<{
      type: string;
      status: string;
      reason?: string;
      message?: string;
      lastTransitionTime?: string;
    }>;
  };
}
```

**è·¯ç”±ä½ç½®**: `/k8s/autoscaling/horizontal-pod-autoscalers`

##### 6.2 VerticalPodAutoscaler (VPA) ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- VPA åˆ—è¡¨æŸ¥çœ‹
- VPA åˆ›å»º/ç¼–è¾‘/åˆ é™¤
- æ›´æ–°æ¨¡å¼é…ç½® (Off/Initial/Recreate/Auto)
- èµ„æºç­–ç•¥é…ç½®
- æ¨èå€¼æŸ¥çœ‹

**è·¯ç”±ä½ç½®**: `/k8s/autoscaling/vertical-pod-autoscalers`

#### 7. é«˜çº§é…ç½®

##### 7.1 è‡ªå®šä¹‰èµ„æºå®šä¹‰ (CRD) ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- CRD åˆ—è¡¨æŸ¥çœ‹
- CRD è¯¦æƒ…æŸ¥çœ‹ (åŒ…æ‹¬ Schemaã€ç‰ˆæœ¬ç­‰)
- CRD åˆ›å»º/åˆ é™¤
- è‡ªå®šä¹‰èµ„æº (CR) åˆ—è¡¨æŸ¥çœ‹
- è‡ªå®šä¹‰èµ„æº CRUD æ“ä½œ
- YAML ç¼–è¾‘å™¨

**æ•°æ®æ¨¡å‹**:
```typescript
export interface CustomResourceDefinition {
  apiVersion: string;
  kind: 'CustomResourceDefinition';
  metadata: K8sMetadata;
  spec: {
    group: string;
    names: {
      plural: string;
      singular?: string;
      shortNames?: string[];
      kind: string;
      listKind?: string;
    };
    scope: 'Namespaced' | 'Cluster';
    versions: Array<{
      name: string;
      served: boolean;
      storage: boolean;
      schema?: {
        openAPIV3Schema: any;
      };
      subresources?: {
        status?: {};
        scale?: {
          specReplicasPath: string;
          statusReplicasPath: string;
        };
      };
    }>;
  };
}
```

**è·¯ç”±ä½ç½®**:
- `/k8s/extend/custom-resource-definitions`
- `/k8s/extend/custom-resources/{group}/{version}/{kind}`

##### 7.2 MutatingWebhookConfiguration ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Webhook åˆ—è¡¨æŸ¥çœ‹
- Webhook é…ç½®æŸ¥çœ‹å’Œç¼–è¾‘
- è§„åˆ™é…ç½®
- å¤±è´¥ç­–ç•¥é…ç½®

**è·¯ç”±ä½ç½®**: `/k8s/extend/mutating-webhooks`

##### 7.3 ValidatingWebhookConfiguration ç®¡ç†
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Webhook åˆ—è¡¨æŸ¥çœ‹
- Webhook é…ç½®æŸ¥çœ‹å’Œç¼–è¾‘
- è§„åˆ™é…ç½®
- å¤±è´¥ç­–ç•¥é…ç½®

**è·¯ç”±ä½ç½®**: `/k8s/extend/validating-webhooks`

#### 8. ç›‘æ§å’Œå¯è§‚æµ‹æ€§

##### 8.1 èµ„æºç›‘æ§å¢å¼º
**åŠŸèƒ½éœ€æ±‚**:
- å®æ—¶ CPU/å†…å­˜ä½¿ç”¨ç‡å›¾è¡¨ (Metrics API)
- Pod/Node èµ„æºä½¿ç”¨è¶‹åŠ¿
- èµ„æºä½¿ç”¨ Top N æ’è¡Œ
- èµ„æºä½¿ç”¨å‘Šè­¦

**æŠ€æœ¯å®ç°**:
- é›†æˆ Metrics Server API
- ä½¿ç”¨ ECharts æˆ– Chart.js ç»˜åˆ¶å›¾è¡¨
- WebSocket å®æ—¶æ›´æ–°

**å¢å¼ºä½ç½®**: Dashboardã€Pod è¯¦æƒ…ã€Node è¯¦æƒ…

##### 8.2 Pod æ—¥å¿—å¢å¼º
**åŠŸèƒ½éœ€æ±‚**:
- å¤šå®¹å™¨æ—¥å¿—åˆ‡æ¢
- æ—¥å¿—è¿‡æ»¤å’Œæœç´¢
- æ—¥å¿—ä¸‹è½½
- æ—¥å¿—æµå¼æŸ¥çœ‹ (Follow)
- æ—¶é—´èŒƒå›´ç­›é€‰
- æ—¥å¿—é«˜äº®

**å¢å¼ºä½ç½®**: Pod æ—¥å¿—æŠ½å±‰

##### 8.3 Pod ç»ˆç«¯ (Exec) åŠŸèƒ½
**é‡è¦æ€§**: â­â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Web ç»ˆç«¯é›†æˆ (xterm.js)
- å¤šå®¹å™¨é€‰æ‹©
- ç»ˆç«¯ä¼šè¯ç®¡ç†
- å¤åˆ¶/ç²˜è´´æ”¯æŒ
- å…¨å±æ¨¡å¼

**æŠ€æœ¯å®ç°**:
```typescript
// WebSocket è¿æ¥ Pod exec
const ws = new WebSocket(
  `wss://api-server/k8s/clusters/${clusterId}/namespaces/${namespace}/pods/${podName}/exec`
);

// ä½¿ç”¨ xterm.js
import { Terminal } from 'xterm';
const terminal = new Terminal();
terminal.open(document.getElementById('terminal'));
```

**å¢å¼ºä½ç½®**: Pod æ“ä½œèœå•

#### 9. åº”ç”¨ç®¡ç†

##### 9.1 Helm Chart ç®¡ç†
**é‡è¦æ€§**: â­â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Helm Release åˆ—è¡¨æŸ¥çœ‹
- Release å®‰è£…/å‡çº§/å›æ»š/åˆ é™¤
- Chart ä»“åº“ç®¡ç†
- Values å¯è§†åŒ–ç¼–è¾‘
- Release å†å²æŸ¥çœ‹
- Chart æ¨¡æ¿é¢„è§ˆ

**è·¯ç”±ä½ç½®**: `/k8s/apps/helm-releases`

##### 9.2 Kustomize æ”¯æŒ
**é‡è¦æ€§**: â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- Kustomization æ–‡ä»¶ç®¡ç†
- èµ„æºç”Ÿæˆé¢„è§ˆ
- åº”ç”¨éƒ¨ç½²

**è·¯ç”±ä½ç½®**: `/k8s/apps/kustomize`

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ç¼ºå¤±åŠŸèƒ½

#### 10. é›†ç¾¤ç®¡ç†å¢å¼º

##### 10.1 API èµ„æºæµè§ˆ
**åŠŸèƒ½éœ€æ±‚**:
- API ç»„åˆ—è¡¨æŸ¥çœ‹
- API èµ„æºåˆ—è¡¨æŸ¥çœ‹
- API ç‰ˆæœ¬æŸ¥çœ‹
- èµ„æº Schema æŸ¥çœ‹

**è·¯ç”±ä½ç½®**: `/k8s/cluster/api-resources`

##### 10.2 é›†ç¾¤ä¿¡æ¯å¢å¼º
**åŠŸèƒ½éœ€æ±‚**:
- Kubernetes ç‰ˆæœ¬è¯¦æƒ…
- ç»„ä»¶ç‰ˆæœ¬ (kube-apiserver, kube-controller-manager, kube-scheduler, etcd)
- é›†ç¾¤å®¹é‡ç»Ÿè®¡
- é›†ç¾¤å¥åº·æ£€æŸ¥

**å¢å¼ºä½ç½®**: é›†ç¾¤è¯¦æƒ…é¡µé¢

##### 10.3 å®¡è®¡æ—¥å¿—æŸ¥çœ‹
**é‡è¦æ€§**: â­â­â­â­

**åŠŸèƒ½éœ€æ±‚**:
- å®¡è®¡äº‹ä»¶åˆ—è¡¨
- ç”¨æˆ·æ“ä½œè¿½è¸ª
- èµ„æºå˜æ›´å†å²
- æ—¶é—´èŒƒå›´ç­›é€‰
- æ“ä½œç±»å‹ç­›é€‰

**è·¯ç”±ä½ç½®**: `/k8s/cluster/audit-logs`

#### 11. å·¥ä½œè´Ÿè½½å¢å¼º

##### 11.1 Pod æ•…éšœæ’æŸ¥å·¥å…·
**åŠŸèƒ½éœ€æ±‚**:
- Pod äº‹ä»¶æ—¶é—´çº¿
- å®¹å™¨é‡å¯å†å²
- èµ„æºé™åˆ¶æ£€æŸ¥
- ç½‘ç»œè¿é€šæ€§æµ‹è¯•
- å­˜å‚¨æŒ‚è½½çŠ¶æ€æ£€æŸ¥

**å¢å¼ºä½ç½®**: Pod è¯¦æƒ…é¡µé¢

##### 11.2 Deployment æ»šåŠ¨æ›´æ–°ç®¡ç†
**åŠŸèƒ½éœ€æ±‚**:
- æ»šåŠ¨æ›´æ–°è¿›åº¦å¯è§†åŒ–
- æ›´æ–°æš‚åœ/æ¢å¤
- æ›´æ–°å›æ»š
- æ›´æ–°å†å²æŸ¥çœ‹
- ReplicaSet ç‰ˆæœ¬å¯¹æ¯”

**å¢å¼ºä½ç½®**: Deployment è¯¦æƒ…é¡µé¢

#### 12. é…ç½®ç®¡ç†å¢å¼º

##### 12.1 ç¯å¢ƒå˜é‡ç®¡ç†
**åŠŸèƒ½éœ€æ±‚**:
- ç¯å¢ƒå˜é‡ç»Ÿä¸€æŸ¥çœ‹
- ConfigMap/Secret å¼•ç”¨å…³ç³»
- ç¯å¢ƒå˜é‡å†²çªæ£€æµ‹

**è·¯ç”±ä½ç½®**: `/k8s/config/environment-variables`

##### 12.2 èµ„æºæ¨¡æ¿
**åŠŸèƒ½éœ€æ±‚**:
- å¸¸ç”¨èµ„æºæ¨¡æ¿åº“
- è‡ªå®šä¹‰æ¨¡æ¿
- æ¨¡æ¿å‚æ•°åŒ–
- ä¸€é”®éƒ¨ç½²

**è·¯ç”±ä½ç½®**: `/k8s/templates`

### ğŸŸ¢ ä½ä¼˜å…ˆçº§åŠŸèƒ½

#### 13. ç”¨æˆ·ä½“éªŒå¢å¼º

##### 13.1 èµ„æºæ‹“æ‰‘å›¾
**åŠŸèƒ½éœ€æ±‚**:
- Pod ä¾èµ–å…³ç³»å¯è§†åŒ–
- Service åˆ° Pod æ˜ å°„
- ConfigMap/Secret å¼•ç”¨å…³ç³»
- ç½‘ç»œç­–ç•¥å¯è§†åŒ–

**è·¯ç”±ä½ç½®**: `/k8s/topology`

##### 13.2 èµ„æºå¯¹æ¯”å·¥å…·
**åŠŸèƒ½éœ€æ±‚**:
- YAML å¯¹æ¯”
- é…ç½®å·®å¼‚é«˜äº®
- å†å²ç‰ˆæœ¬å¯¹æ¯”

**è·¯ç”±ä½ç½®**: å„èµ„æºè¯¦æƒ…é¡µé¢

##### 13.3 æ‰¹é‡æ“ä½œ
**åŠŸèƒ½éœ€æ±‚**:
- æ‰¹é‡åˆ é™¤
- æ‰¹é‡æ ‡ç­¾ä¿®æ”¹
- æ‰¹é‡å‘½åç©ºé—´åˆ‡æ¢

**å¢å¼ºä½ç½®**: å„èµ„æºåˆ—è¡¨é¡µé¢

##### 13.4 èµ„æºå¯¼å‡º
**åŠŸèƒ½éœ€æ±‚**:
- YAML å¯¼å‡º
- JSON å¯¼å‡º
- æ‰¹é‡å¯¼å‡º
- å¯¼å‡ºä¸º Helm Chart

**å¢å¼ºä½ç½®**: å„èµ„æºè¯¦æƒ…é¡µé¢

#### 14. é›†æˆåŠŸèƒ½

##### 14.1 Git é›†æˆ (GitOps)
**åŠŸèƒ½éœ€æ±‚**:
- Git ä»“åº“å…³è”
- è‡ªåŠ¨åŒæ­¥
- å˜æ›´å®¡è®¡
- ArgoCD/Flux CD é›†æˆ

**è·¯ç”±ä½ç½®**: `/k8s/gitops`

##### 14.2 CI/CD é›†æˆ
**åŠŸèƒ½éœ€æ±‚**:
- Pipeline æŸ¥çœ‹
- æ„å»ºå†å²
- éƒ¨ç½²è§¦å‘

**è·¯ç”±ä½ç½®**: `/k8s/cicd`

##### 14.3 æˆæœ¬åˆ†æ
**åŠŸèƒ½éœ€æ±‚**:
- èµ„æºæˆæœ¬ç»Ÿè®¡
- æŒ‰å‘½åç©ºé—´/æ ‡ç­¾åˆ†ç»„
- æˆæœ¬è¶‹åŠ¿åˆ†æ
- èµ„æºä¼˜åŒ–å»ºè®®

**è·¯ç”±ä½ç½®**: `/k8s/cost-analysis`

## å®ç°ä¼˜å…ˆçº§å»ºè®®

### ç¬¬ä¸€é˜¶æ®µ (é«˜ä¼˜å…ˆçº§ï¼Œç«‹å³å®æ–½)

**ç›®æ ‡**: è¡¥å……æ ¸å¿ƒåŠŸèƒ½ï¼Œæå‡å®‰å…¨æ€§å’Œå¯ç”¨æ€§

1. **NetworkPolicy ç®¡ç†** - å®‰å…¨æ ¸å¿ƒ
2. **HorizontalPodAutoscaler (HPA)** - è‡ªåŠ¨æ‰©ç¼©å®¹
3. **Pod ç»ˆç«¯ (Exec)** - è¿ç»´å¿…å¤‡
4. **èµ„æºç›‘æ§å¢å¼º** - å®æ—¶ç›‘æ§
5. **PriorityClass ç®¡ç†** - è°ƒåº¦ä¼˜åŒ–

**é¢„è®¡å·¥ä½œé‡**: 3-4 å‘¨

### ç¬¬äºŒé˜¶æ®µ (ä¸­é«˜ä¼˜å…ˆçº§ï¼Œè¿‘æœŸå®æ–½)

**ç›®æ ‡**: å®Œå–„èµ„æºç®¡ç†ï¼Œå¢å¼ºå­˜å‚¨å’Œç½‘ç»œèƒ½åŠ›

1. **VolumeSnapshots ç®¡ç†** - æ•°æ®å¤‡ä»½æ¢å¤
2. **CRD å’Œ CR ç®¡ç†** - æ‰©å±•æ€§
3. **Endpoints/EndpointSlice** - ç½‘ç»œè°ƒè¯•
4. **ReplicaSets ç®¡ç†** - èµ„æºå®Œæ•´æ€§
5. **Certificate ç®¡ç†** - å®‰å…¨è¯ä¹¦
6. **å®¡è®¡æ—¥å¿—æŸ¥çœ‹** - å®‰å…¨å®¡è®¡

**é¢„è®¡å·¥ä½œé‡**: 4-5 å‘¨

### ç¬¬ä¸‰é˜¶æ®µ (ä¸­ä¼˜å…ˆçº§ï¼Œä¸­æœŸå®æ–½)

**ç›®æ ‡**: åº”ç”¨ç®¡ç†å’Œé«˜çº§åŠŸèƒ½

1. **Helm Chart ç®¡ç†** - åº”ç”¨éƒ¨ç½²
2. **Pod è°ƒåº¦è¯¦æƒ…å¢å¼º** - è°ƒåº¦ä¼˜åŒ–
3. **VPA ç®¡ç†** - å‚ç›´æ‰©ç¼©å®¹
4. **RuntimeClass ç®¡ç†** - è¿è¡Œæ—¶ç®¡ç†
5. **Pod æ—¥å¿—å¢å¼º** - æ—¥å¿—åˆ†æ
6. **Pod æ•…éšœæ’æŸ¥å·¥å…·** - è¿ç»´å·¥å…·

**é¢„è®¡å·¥ä½œé‡**: 5-6 å‘¨

### ç¬¬å››é˜¶æ®µ (ä½ä¼˜å…ˆçº§ï¼Œé•¿æœŸè§„åˆ’)

**ç›®æ ‡**: ç”¨æˆ·ä½“éªŒå’Œé›†æˆåŠŸèƒ½

1. **èµ„æºæ‹“æ‰‘å›¾** - å¯è§†åŒ–
2. **GitOps é›†æˆ** - è‡ªåŠ¨åŒ–éƒ¨ç½²
3. **æˆæœ¬åˆ†æ** - èµ„æºä¼˜åŒ–
4. **èµ„æºæ¨¡æ¿** - å¿«é€Ÿéƒ¨ç½²
5. **æ‰¹é‡æ“ä½œ** - æ•ˆç‡æå‡

**é¢„è®¡å·¥ä½œé‡**: 6-8 å‘¨

## æŠ€æœ¯å®ç°å»ºè®®

### 1. API æ‰©å±•

**æ–°å¢ API èµ„æº**:
```typescript
// src/api/k8s/types.ts æ–°å¢ç±»å‹
export interface NetworkPolicy { /* ... */ }
export interface HorizontalPodAutoscaler { /* ... */ }
export interface VolumeSnapshot { /* ... */ }
export interface CustomResourceDefinition { /* ... */ }
export interface PriorityClass { /* ... */ }
// ... æ›´å¤šç±»å‹

// src/api/k8s/index.ts æ–°å¢ API
export const networkPolicyApi = createResourceApi<NetworkPolicy>(/*...*/);
export const hpaApi = createResourceApi<HorizontalPodAutoscaler>(/*...*/);
export const volumeSnapshotApi = createResourceApi<VolumeSnapshot>(/*...*/);
// ... æ›´å¤š API
```

### 2. è·¯ç”±æ‰©å±•

**æ–°å¢è·¯ç”±æ¨¡å—**:
```typescript
// src/router/routes/modules/k8s.ts æ‰©å±•

// è‡ªåŠ¨æ‰©ç¼©å®¹æ¨¡å—
{
  meta: { icon: 'lucide:trending-up', title: 'è‡ªåŠ¨æ‰©ç¼©å®¹' },
  name: 'K8sAutoscaling',
  path: 'autoscaling',
  redirect: '/k8s/autoscaling/hpa',
  children: [
    {
      name: 'K8sHPA',
      path: 'hpa',
      component: () => import('#/views/k8s/autoscaling/hpa/index.vue'),
      meta: { icon: 'lucide:trending-up', title: 'HPA' },
    },
    {
      name: 'K8sVPA',
      path: 'vpa',
      component: () => import('#/views/k8s/autoscaling/vpa/index.vue'),
      meta: { icon: 'lucide:bar-chart-2', title: 'VPA' },
    },
  ],
}

// è°ƒåº¦æ¨¡å—
{
  meta: { icon: 'lucide:calendar', title: 'è°ƒåº¦' },
  name: 'K8sScheduling',
  path: 'scheduling',
  redirect: '/k8s/scheduling/priority-classes',
  children: [
    {
      name: 'K8sPriorityClasses',
      path: 'priority-classes',
      component: () => import('#/views/k8s/scheduling/priority-classes/index.vue'),
      meta: { icon: 'lucide:star', title: 'PriorityClass' },
    },
    {
      name: 'K8sRuntimeClasses',
      path: 'runtime-classes',
      component: () => import('#/views/k8s/scheduling/runtime-classes/index.vue'),
      meta: { icon: 'lucide:cpu', title: 'RuntimeClass' },
    },
  ],
}

// æ‰©å±•èµ„æºæ¨¡å—
{
  meta: { icon: 'lucide:puzzle', title: 'æ‰©å±•' },
  name: 'K8sExtend',
  path: 'extend',
  redirect: '/k8s/extend/crds',
  children: [
    {
      name: 'K8sCRDs',
      path: 'crds',
      component: () => import('#/views/k8s/extend/crds/index.vue'),
      meta: { icon: 'lucide:box', title: 'CRD' },
    },
    {
      name: 'K8sCustomResources',
      path: 'custom-resources/:group/:version/:kind',
      component: () => import('#/views/k8s/extend/custom-resources/index.vue'),
      meta: { hideInMenu: true, title: 'è‡ªå®šä¹‰èµ„æº' },
    },
  ],
}

// åº”ç”¨ç®¡ç†æ¨¡å—
{
  meta: { icon: 'lucide:package', title: 'åº”ç”¨' },
  name: 'K8sApps',
  path: 'apps',
  redirect: '/k8s/apps/helm-releases',
  children: [
    {
      name: 'K8sHelmReleases',
      path: 'helm-releases',
      component: () => import('#/views/k8s/apps/helm-releases/index.vue'),
      meta: { icon: 'lucide:package-2', title: 'Helm Releases' },
    },
  ],
}

// å®‰å…¨æ¨¡å—
{
  meta: { icon: 'lucide:shield-check', title: 'å®‰å…¨' },
  name: 'K8sSecurity',
  path: 'security',
  redirect: '/k8s/security/certificates',
  children: [
    {
      name: 'K8sCertificates',
      path: 'certificates',
      component: () => import('#/views/k8s/security/certificates/index.vue'),
      meta: { icon: 'lucide:file-certificate', title: 'Certificates' },
    },
  ],
}
```

### 3. ç»„ä»¶å¤ç”¨

**åˆ©ç”¨ç°æœ‰é€šç”¨ç»„ä»¶**:
- `ResourceList.vue` - åˆ—è¡¨é¡µé¢
- `ResourceFilter.vue` - ç­›é€‰å™¨
- `StatusTag.vue` - çŠ¶æ€æ ‡ç­¾
- `YAMLEditorModal.vue` - YAML ç¼–è¾‘
- `DeleteConfirmModal.vue` - åˆ é™¤ç¡®è®¤

**æ–°å¢é€šç”¨ç»„ä»¶**:
```typescript
// src/views/k8s/_shared/TerminalModal.vue
// Web ç»ˆç«¯ç»„ä»¶ (åŸºäº xterm.js)

// src/views/k8s/_shared/MetricsChart.vue
// èµ„æºç›‘æ§å›¾è¡¨ç»„ä»¶ (åŸºäº ECharts)

// src/views/k8s/_shared/NetworkPolicyEditor.vue
// ç½‘ç»œç­–ç•¥å¯è§†åŒ–ç¼–è¾‘å™¨

// src/views/k8s/_shared/TopologyGraph.vue
// èµ„æºæ‹“æ‰‘å›¾ç»„ä»¶ (åŸºäº G6 æˆ– D3.js)
```

### 4. ä¾èµ–åº“å»ºè®®

**æ–°å¢ä¾èµ–**:
```json
{
  "dependencies": {
    "xterm": "^5.3.0",                    // Web ç»ˆç«¯
    "xterm-addon-fit": "^0.8.0",          // ç»ˆç«¯é€‚é…
    "xterm-addon-web-links": "^0.9.0",    // ç»ˆç«¯é“¾æ¥
    "echarts": "^5.6.0",                  // å›¾è¡¨åº“ (å·²æœ‰)
    "@antv/g6": "^4.8.0",                 // æ‹“æ‰‘å›¾ (å¯é€‰)
    "yaml": "^2.4.0",                     // YAML è§£æå¢å¼º
    "monaco-editor": "^0.47.0",           // ä»£ç ç¼–è¾‘å™¨ (å¯é€‰ï¼Œæ›¿ä»£å½“å‰ YAML ç¼–è¾‘å™¨)
    "diff": "^7.0.0"                      // å·®å¼‚å¯¹æ¯”
  }
}
```

### 5. Mock æ•°æ®æ‰©å±•

**æ–°å¢ Mock å‡½æ•°**:
```typescript
// src/api/k8s/mock.ts

export function getMockNetworkPolicyList(params: NetworkPolicyListParams) { /* ... */ }
export function getMockHPAList(params: HPAListParams) { /* ... */ }
export function getMockVolumeSnapshotList(params: VolumeSnapshotListParams) { /* ... */ }
export function getMockCRDList(params: CRDListParams) { /* ... */ }
export function getMockPriorityClassList(params: PriorityClassListParams) { /* ... */ }
// ... æ›´å¤š Mock å‡½æ•°
```

## å®æ–½å»ºè®®

### å¼€å‘æµç¨‹

1. **ç±»å‹å®šä¹‰** â†’ `src/api/k8s/types.ts`
2. **API å®ç°** â†’ `src/api/k8s/index.ts`
3. **Mock æ•°æ®** â†’ `src/api/k8s/mock.ts`
4. **è·¯ç”±é…ç½®** â†’ `src/router/routes/modules/k8s.ts`
5. **é¡µé¢å¼€å‘** â†’ `src/views/k8s/{module}/{resource}/index.vue`
6. **ç»„ä»¶å¼€å‘** â†’ è¯¦æƒ…æŠ½å±‰ã€ç¼–è¾‘æ¨¡æ€æ¡†ç­‰
7. **å›½é™…åŒ–** â†’ `src/locales/`
8. **æµ‹è¯•éªŒè¯** â†’ å•å…ƒæµ‹è¯•ã€E2E æµ‹è¯•

### è´¨é‡ä¿è¯

- **TypeScript ä¸¥æ ¼æ¨¡å¼**: ç¡®ä¿ç±»å‹å®‰å…¨
- **ESLint æ£€æŸ¥**: ä»£ç è§„èŒƒ
- **ç»„ä»¶æµ‹è¯•**: Vitest å•å…ƒæµ‹è¯•
- **E2E æµ‹è¯•**: Playwright æµ‹è¯•å…³é”®æµç¨‹
- **ä»£ç å®¡æŸ¥**: PR Review æµç¨‹
- **æ–‡æ¡£æ›´æ–°**: åŒæ­¥æ›´æ–°åŠŸèƒ½æ–‡æ¡£

### æ€§èƒ½è€ƒè™‘

- **è™šæ‹Ÿæ»šåŠ¨**: å¤§åˆ—è¡¨ä½¿ç”¨ VXE Table è™šæ‹Ÿæ»šåŠ¨
- **æ‡’åŠ è½½**: è·¯ç”±å’Œç»„ä»¶æŒ‰éœ€åŠ è½½
- **æ•°æ®ç¼“å­˜**: åˆç†ä½¿ç”¨ Pinia ç¼“å­˜
- **WebSocket ä¼˜åŒ–**: å®æ—¶æ•°æ®è¿æ¥ç®¡ç†
- **Bundle ä¼˜åŒ–**: ä»£ç åˆ†å‰²å’Œ Tree Shaking

## æ€»ç»“

å½“å‰ web-k8s åº”ç”¨å·²ç»å®ç°äº† **Kubernetes æ ¸å¿ƒèµ„æºçš„ 60-70%** ç®¡ç†åŠŸèƒ½ï¼Œæ¶µç›–äº†å·¥ä½œè´Ÿè½½ã€ç½‘ç»œã€å­˜å‚¨ã€æƒé™ã€é…é¢ç­‰ä¸»è¦æ¨¡å—ã€‚

### å…³é”®ç¼ºå¤±åŠŸèƒ½

1. **NetworkPolicy** (ç½‘ç»œå®‰å…¨)
2. **HPA/VPA** (è‡ªåŠ¨æ‰©ç¼©å®¹)
3. **Pod ç»ˆç«¯** (è¿ç»´å¿…å¤‡)
4. **èµ„æºç›‘æ§** (å¯è§‚æµ‹æ€§)
5. **Helm ç®¡ç†** (åº”ç”¨éƒ¨ç½²)
6. **CRD ç®¡ç†** (æ‰©å±•æ€§)

### ä¼˜åŠ¿

- âœ… é…ç½®é©±åŠ¨æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- âœ… å®Œå–„çš„ç±»å‹ç³»ç»Ÿ
- âœ… é€šç”¨ç»„ä»¶åº“
- âœ… Mock æ•°æ®æ”¯æŒ
- âœ… å›½é™…åŒ–æ”¯æŒ

### æ”¹è¿›å»ºè®®

æŒ‰ç…§ä¼˜å…ˆçº§åˆ†é˜¶æ®µå®æ–½ï¼Œå…ˆè¡¥å……é«˜ä¼˜å…ˆçº§çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆNetworkPolicyã€HPAã€Pod Execã€ç›‘æ§ï¼‰ï¼Œå†é€æ­¥å®Œå–„ä¸­ä½ä¼˜å…ˆçº§åŠŸèƒ½ã€‚é¢„è®¡ **4-6 ä¸ªæœˆ** å¯ä»¥å®Œæˆå¤§éƒ¨åˆ†è¡¥å……åŠŸèƒ½ï¼Œè¾¾åˆ° **90%+** çš„ Kubernetes èµ„æºè¦†ç›–ç‡ã€‚

## å‚è€ƒèµ„æº

- [Kubernetes å®˜æ–¹æ–‡æ¡£](https://kubernetes.io/zh-cn/docs/)
- [Kubernetes API å‚è€ƒ](https://kubernetes.io/docs/reference/kubernetes-api/)
- [Kubernetes Dashboard](https://github.com/kubernetes/dashboard)
- [Lens IDE](https://k8slens.dev/)
- [K9s](https://k9scli.io/)
