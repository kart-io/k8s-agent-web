{"version":3,"file":"CodeEditor.vue.js","sources":["../../../src/components/basic/CodeEditor.vue"],"sourcesContent":["<template>\n  <div class=\"code-editor\" :style=\"{ height: height }\">\n    <textarea ref=\"editorRef\" :value=\"modelValue\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted, onBeforeUnmount } from 'vue'\nimport { message } from 'ant-design-vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: ''\n  },\n  language: {\n    type: String,\n    default: 'javascript',\n    validator: (value) => ['javascript', 'typescript', 'json', 'html', 'css', 'python', 'go', 'yaml'].includes(value)\n  },\n  theme: {\n    type: String,\n    default: 'default',\n    validator: (value) => ['default', 'monokai', 'dracula'].includes(value)\n  },\n  height: {\n    type: String,\n    default: '400px'\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  },\n  showLineNumbers: {\n    type: Boolean,\n    default: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'change'])\n\nconst editorRef = ref(null)\nlet editor = null\n\nonMounted(() => {\n  initEditor()\n})\n\nonBeforeUnmount(() => {\n  destroyEditor()\n})\n\nconst initEditor = () => {\n  try {\n    // 这里可以集成 CodeMirror, Monaco Editor 或其他编辑器\n    // 为了简化，这里使用简单的 textarea 实现\n    // 实际项目中建议使用专业的代码编辑器库\n\n    if (editorRef.value) {\n      const textarea = editorRef.value\n      textarea.addEventListener('input', handleInput)\n\n      // 应用基本样式\n      applyBasicStyles(textarea)\n    }\n  } catch (error) {\n    console.error('Failed to initialize editor:', error)\n    message.error('代码编辑器初始化失败')\n  }\n}\n\nconst applyBasicStyles = (textarea) => {\n  textarea.style.width = '100%'\n  textarea.style.height = '100%'\n  textarea.style.border = '1px solid #d9d9d9'\n  textarea.style.borderRadius = '4px'\n  textarea.style.padding = '12px'\n  textarea.style.fontFamily = \"'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace\"\n  textarea.style.fontSize = '14px'\n  textarea.style.lineHeight = '1.5'\n  textarea.style.resize = 'none'\n  textarea.style.outline = 'none'\n\n  if (props.readonly) {\n    textarea.readOnly = true\n    textarea.style.backgroundColor = '#f5f5f5'\n  }\n}\n\nconst handleInput = (e) => {\n  const value = e.target.value\n  emit('update:modelValue', value)\n  emit('change', value)\n}\n\nconst destroyEditor = () => {\n  if (editorRef.value) {\n    editorRef.value.removeEventListener('input', handleInput)\n  }\n}\n\nwatch(() => props.modelValue, (newValue) => {\n  if (editorRef.value && editorRef.value.value !== newValue) {\n    editorRef.value.value = newValue\n  }\n})\n\n// 暴露方法\ndefineExpose({\n  getValue: () => editorRef.value?.value || '',\n  setValue: (value) => {\n    if (editorRef.value) {\n      editorRef.value.value = value\n      emit('update:modelValue', value)\n    }\n  },\n  focus: () => editorRef.value?.focus()\n})\n</script>\n\n<style scoped lang=\"scss\">\n.code-editor {\n  width: 100%;\n  position: relative;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  overflow: hidden;\n\n  &:hover {\n    border-color: #40a9ff;\n  }\n\n  &:focus-within {\n    border-color: #1890ff;\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\n  }\n}\n</style>\n"],"names":["_createElementBlock","_createElementVNode"],"mappings":"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"}