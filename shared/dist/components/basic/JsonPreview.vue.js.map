{"version":3,"file":"JsonPreview.vue.js","sources":["../../../src/components/basic/JsonPreview.vue"],"sourcesContent":["<template>\n  <div class=\"json-preview\">\n    <div v-if=\"showToolbar\" class=\"json-toolbar\">\n      <a-space>\n        <a-button size=\"small\" @click=\"handleCopy\">\n          <template #icon><CopyOutlined /></template>\n          复制\n        </a-button>\n        <a-button size=\"small\" @click=\"handleExpand\">\n          <template #icon><ExpandOutlined v-if=\"!expanded\" /><ShrinkOutlined v-else /></template>\n          {{ expanded ? '折叠' : '展开' }}\n        </a-button>\n        <a-button v-if=\"showDownload\" size=\"small\" @click=\"handleDownload\">\n          <template #icon><DownloadOutlined /></template>\n          下载\n        </a-button>\n      </a-space>\n    </div>\n    <div class=\"json-content\" :class=\"{ expanded }\">\n      <pre><code>{{ formattedJson }}</code></pre>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { message } from 'ant-design-vue'\nimport {\n  CopyOutlined,\n  ExpandOutlined,\n  ShrinkOutlined,\n  DownloadOutlined\n} from '@ant-design/icons-vue'\n\nconst props = defineProps({\n  data: {\n    type: [Object, Array, String],\n    required: true\n  },\n  showToolbar: {\n    type: Boolean,\n    default: true\n  },\n  showDownload: {\n    type: Boolean,\n    default: true\n  },\n  indent: {\n    type: Number,\n    default: 2\n  },\n  fileName: {\n    type: String,\n    default: 'data.json'\n  }\n})\n\nconst expanded = ref(true)\n\nconst formattedJson = computed(() => {\n  try {\n    const data = typeof props.data === 'string' ? JSON.parse(props.data) : props.data\n    return JSON.stringify(data, null, props.indent)\n  } catch (error) {\n    console.error('Failed to format JSON:', error)\n    return String(props.data)\n  }\n})\n\nconst handleCopy = async () => {\n  try {\n    await navigator.clipboard.writeText(formattedJson.value)\n    message.success('复制成功')\n  } catch (error) {\n    console.error('Failed to copy:', error)\n    message.error('复制失败')\n  }\n}\n\nconst handleExpand = () => {\n  expanded.value = !expanded.value\n}\n\nconst handleDownload = () => {\n  try {\n    const blob = new Blob([formattedJson.value], { type: 'application/json' })\n    const url = URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = props.fileName\n    link.click()\n    URL.revokeObjectURL(url)\n    message.success('下载成功')\n  } catch (error) {\n    console.error('Failed to download:', error)\n    message.error('下载失败')\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.json-preview {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.json-toolbar {\n  padding: 8px 12px;\n  background-color: #fafafa;\n  border-bottom: 1px solid #d9d9d9;\n}\n\n.json-content {\n  max-height: 400px;\n  overflow: auto;\n  background-color: #fff;\n\n  &.expanded {\n    max-height: none;\n  }\n\n  pre {\n    margin: 0;\n    padding: 12px;\n\n    code {\n      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.6;\n      color: #333;\n    }\n  }\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.2);\n    border-radius: 4px;\n\n    &:hover {\n      background-color: rgba(0, 0, 0, 0.3);\n    }\n  }\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_createVNode","_unref","_createBlock","_createTextVNode","_createElementVNode","_normalizeClass"],"mappings":"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"}