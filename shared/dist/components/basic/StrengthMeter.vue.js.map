{"version":3,"file":"StrengthMeter.vue.js","sources":["../../../src/components/basic/StrengthMeter.vue"],"sourcesContent":["<template>\n  <div class=\"strength-meter\">\n    <a-input-password\n      v-model:value=\"passwordValue\"\n      :placeholder=\"placeholder\"\n      :disabled=\"disabled\"\n      @input=\"handleInput\"\n    />\n    <div v-if=\"showStrength\" class=\"strength-bar\">\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 1 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 2 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 3 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 4 }]\"\n      />\n    </div>\n    <div v-if=\"showStrength\" class=\"strength-text\">\n      强度：<span :class=\"`strength-text-${strength}`\">{{ strengthText }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: ''\n  },\n  placeholder: {\n    type: String,\n    default: '请输入密码'\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  showStrength: {\n    type: Boolean,\n    default: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'change', 'strength-change'])\n\nconst passwordValue = ref(props.modelValue)\n\nwatch(() => props.modelValue, (val) => {\n  passwordValue.value = val\n})\n\n// 计算密码强度\nconst strength = computed(() => {\n  const pwd = passwordValue.value\n  if (!pwd) return 0\n\n  let score = 0\n\n  // 长度评分\n  if (pwd.length >= 8) score++\n  if (pwd.length >= 12) score++\n\n  // 包含数字\n  if (/\\d/.test(pwd)) score++\n\n  // 包含小写字母\n  if (/[a-z]/.test(pwd)) score++\n\n  // 包含大写字母\n  if (/[A-Z]/.test(pwd)) score++\n\n  // 包含特殊字符\n  if (/[^a-zA-Z0-9]/.test(pwd)) score++\n\n  // 映射到1-4级\n  if (score <= 2) return 1\n  if (score <= 4) return 2\n  if (score <= 5) return 3\n  return 4\n})\n\nconst strengthText = computed(() => {\n  const texts = ['', '弱', '中', '强', '非常强']\n  return texts[strength.value] || ''\n})\n\nconst handleInput = () => {\n  emit('update:modelValue', passwordValue.value)\n  emit('change', passwordValue.value)\n  emit('strength-change', strength.value)\n}\n</script>\n\n<style scoped lang=\"scss\">\n.strength-meter {\n  width: 100%;\n}\n\n.strength-bar {\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n\n  &-item {\n    flex: 1;\n    height: 4px;\n    background-color: #e8e8e8;\n    border-radius: 2px;\n    transition: all 0.3s;\n\n    &.active {\n      &.strength-1 {\n        background-color: #ff4d4f;\n      }\n\n      &.strength-2 {\n        background-color: #faad14;\n      }\n\n      &.strength-3 {\n        background-color: #52c41a;\n      }\n\n      &.strength-4 {\n        background-color: #1890ff;\n      }\n    }\n  }\n}\n\n.strength-text {\n  margin-top: 4px;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.45);\n\n  span {\n    font-weight: 500;\n\n    &.strength-text-1 {\n      color: #ff4d4f;\n    }\n\n    &.strength-text-2 {\n      color: #faad14;\n    }\n\n    &.strength-text-3 {\n      color: #52c41a;\n    }\n\n    &.strength-text-4 {\n      color: #1890ff;\n    }\n  }\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_createVNode","_createElementVNode","_normalizeClass"],"mappings":"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"}