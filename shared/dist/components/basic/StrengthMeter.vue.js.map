{"version":3,"file":"StrengthMeter.vue.js","sources":["../../../src/components/basic/StrengthMeter.vue"],"sourcesContent":["<template>\n  <div class=\"strength-meter\">\n    <a-input-password\n      v-model:value=\"passwordValue\"\n      :placeholder=\"placeholder\"\n      :disabled=\"disabled\"\n      @input=\"handleInput\"\n    />\n    <div v-if=\"showStrength\" class=\"strength-bar\">\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 1 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 2 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 3 }]\"\n      />\n      <div\n        class=\"strength-bar-item\"\n        :class=\"[`strength-${strength}`, { active: strength >= 4 }]\"\n      />\n    </div>\n    <div v-if=\"showStrength\" class=\"strength-text\">\n      强度：<span :class=\"`strength-text-${strength}`\">{{ strengthText }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: ''\n  },\n  placeholder: {\n    type: String,\n    default: '请输入密码'\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  showStrength: {\n    type: Boolean,\n    default: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'change', 'strength-change'])\n\nconst passwordValue = ref(props.modelValue)\n\nwatch(() => props.modelValue, (val) => {\n  passwordValue.value = val\n})\n\n// 计算密码强度\nconst strength = computed(() => {\n  const pwd = passwordValue.value\n  if (!pwd) return 0\n\n  let score = 0\n\n  // 长度评分\n  if (pwd.length >= 8) score++\n  if (pwd.length >= 12) score++\n\n  // 包含数字\n  if (/\\d/.test(pwd)) score++\n\n  // 包含小写字母\n  if (/[a-z]/.test(pwd)) score++\n\n  // 包含大写字母\n  if (/[A-Z]/.test(pwd)) score++\n\n  // 包含特殊字符\n  if (/[^a-zA-Z0-9]/.test(pwd)) score++\n\n  // 映射到1-4级\n  if (score <= 2) return 1\n  if (score <= 4) return 2\n  if (score <= 5) return 3\n  return 4\n})\n\nconst strengthText = computed(() => {\n  const texts = ['', '弱', '中', '强', '非常强']\n  return texts[strength.value] || ''\n})\n\nconst handleInput = () => {\n  emit('update:modelValue', passwordValue.value)\n  emit('change', passwordValue.value)\n  emit('strength-change', strength.value)\n}\n</script>\n\n<style scoped lang=\"scss\">\n.strength-meter {\n  width: 100%;\n}\n\n.strength-bar {\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n\n  &-item {\n    flex: 1;\n    height: 4px;\n    background-color: #e8e8e8;\n    border-radius: 2px;\n    transition: all 0.3s;\n\n    &.active {\n      &.strength-1 {\n        background-color: #ff4d4f;\n      }\n\n      &.strength-2 {\n        background-color: #faad14;\n      }\n\n      &.strength-3 {\n        background-color: #52c41a;\n      }\n\n      &.strength-4 {\n        background-color: #1890ff;\n      }\n    }\n  }\n}\n\n.strength-text {\n  margin-top: 4px;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.45);\n\n  span {\n    font-weight: 500;\n\n    &.strength-text-1 {\n      color: #ff4d4f;\n    }\n\n    &.strength-text-2 {\n      color: #faad14;\n    }\n\n    &.strength-text-3 {\n      color: #52c41a;\n    }\n\n    &.strength-text-4 {\n      color: #1890ff;\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,MAAM,aAAa,GAAG,GAAG,CAAC,KAAK,CAAC,UAAU;;AAE1C,KAAK,CAAC,MAAM,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,KAAK;AACvC,EAAE,aAAa,CAAC,KAAK,GAAG;AACxB,CAAC;;AAED;AACA,MAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM;AAChC,EAAE,MAAM,GAAG,GAAG,aAAa,CAAC;AAC5B,EAAE,IAAI,CAAC,GAAG,EAAE,OAAO;;AAEnB,EAAE,IAAI,KAAK,GAAG;;AAEd;AACA,EAAE,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE,KAAK;AAC5B,EAAE,IAAI,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK;;AAE7B;AACA,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK;;AAE3B;AACA,EAAE,IAAI,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK;;AAE9B;AACA,EAAE,IAAI,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK;;AAE9B;AACA,EAAE,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK;;AAErC;AACA,EAAE,IAAI,KAAK,IAAI,CAAC,EAAE,OAAO;AACzB,EAAE,IAAI,KAAK,IAAI,CAAC,EAAE,OAAO;AACzB,EAAE,IAAI,KAAK,IAAI,CAAC,EAAE,OAAO;AACzB,EAAE,OAAO;AACT,CAAC;;AAED,MAAM,YAAY,GAAG,QAAQ,CAAC,MAAM;AACpC,EAAE,MAAM,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK;AACzC,EAAE,OAAO,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI;AAClC,CAAC;;AAED,MAAM,WAAW,GAAG,MAAM;AAC1B,EAAE,IAAI,CAAC,mBAAmB,EAAE,aAAa,CAAC,KAAK;AAC/C,EAAE,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,KAAK;AACpC,EAAE,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC,KAAK;AACxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}