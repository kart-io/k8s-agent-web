{"version":3,"file":"TabLayout.vue.js","sources":["../../../src/components/layout/TabLayout.vue"],"sourcesContent":["<template>\n  <div class=\"tab-layout\">\n    <a-tabs\n      v-model:activeKey=\"activeKey\"\n      type=\"editable-card\"\n      hide-add\n      @edit=\"onEdit\"\n      @change=\"onTabChange\"\n    >\n      <a-tab-pane\n        v-for=\"tab in tabs\"\n        :key=\"tab.key\"\n        :tab=\"tab.label\"\n        :closable=\"tab.closable !== false\"\n      />\n    </a-tabs>\n    <div class=\"tab-content\">\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\n\nconst props = defineProps({\n  tabs: {\n    type: Array,\n    required: true,\n    default: () => []\n  },\n  defaultActiveKey: {\n    type: String,\n    default: ''\n  }\n})\n\nconst emit = defineEmits(['tab-change', 'tab-close'])\n\nconst router = useRouter()\nconst route = useRoute()\n\nconst activeKey = ref(props.defaultActiveKey || (props.tabs[0]?.key || ''))\n\n// 监听路由变化，更新激活的标签\nwatch(\n  () => route.path,\n  (newPath) => {\n    const tab = props.tabs.find(t => t.path === newPath)\n    if (tab) {\n      activeKey.value = tab.key\n    }\n  },\n  { immediate: true }\n)\n\nconst onTabChange = (key) => {\n  const tab = props.tabs.find(t => t.key === key)\n  if (tab?.path) {\n    router.push(tab.path)\n  }\n  emit('tab-change', key, tab)\n}\n\nconst onEdit = (targetKey, action) => {\n  if (action === 'remove') {\n    const tab = props.tabs.find(t => t.key === targetKey)\n    emit('tab-close', targetKey, tab)\n  }\n}\n</script>\n\n<style scoped>\n.tab-layout {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.tab-content {\n  flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n\n:deep(.ant-tabs) {\n  margin-bottom: 0;\n}\n\n:deep(.ant-tabs-nav) {\n  margin-bottom: 0;\n  padding: 0 16px;\n  background: #fff;\n}\n\n:deep(.ant-tabs-content-holder) {\n  display: none;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,MAAM,MAAM,GAAG,SAAS;AACxB,MAAM,KAAK,GAAG,QAAQ;;AAEtB,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,gBAAgB,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,EAAE,CAAC;;AAE1E;AACA,KAAK;AACL,EAAE,MAAM,KAAK,CAAC,IAAI;AAClB,EAAE,CAAC,OAAO,KAAK;AACf,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO;AACvD,IAAI,IAAI,GAAG,EAAE;AACb,MAAM,SAAS,CAAC,KAAK,GAAG,GAAG,CAAC;AAC5B,IAAI;AACJ,EAAE,CAAC;AACH,EAAE,EAAE,SAAS,EAAE,IAAI;AACnB;;AAEA,MAAM,WAAW,GAAG,CAAC,GAAG,KAAK;AAC7B,EAAE,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG;AAChD,EAAE,IAAI,GAAG,EAAE,IAAI,EAAE;AACjB,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI;AACxB,EAAE;AACF,EAAE,IAAI,CAAC,YAAY,EAAE,GAAG,EAAE,GAAG;AAC7B;;AAEA,MAAM,MAAM,GAAG,CAAC,SAAS,EAAE,MAAM,KAAK;AACtC,EAAE,IAAI,MAAM,KAAK,QAAQ,EAAE;AAC3B,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS;AACxD,IAAI,IAAI,CAAC,WAAW,EAAE,SAAS,EAAE,GAAG;AACpC,EAAE;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}