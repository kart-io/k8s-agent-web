{"version":3,"file":"useScrollLock.js","sources":["../../src/composables/useScrollLock.js"],"sourcesContent":["import { ref, watch, onUnmounted } from 'vue'\n\n/**\n * 滚动锁定组合函数\n * 用于锁定和解锁页面滚动（常用于模态框、抽屉等）\n */\nexport function useScrollLock(initialLocked = false) {\n  const isLocked = ref(initialLocked)\n  const originalOverflow = ref('')\n  const originalPaddingRight = ref('')\n\n  /**\n   * 锁定滚动\n   */\n  const lock = () => {\n    if (isLocked.value) return\n\n    const body = document.body\n    const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth\n\n    // 保存原始样式\n    originalOverflow.value = body.style.overflow\n    originalPaddingRight.value = body.style.paddingRight\n\n    // 锁定滚动\n    body.style.overflow = 'hidden'\n\n    // 补偿滚动条宽度，防止页面抖动\n    if (scrollbarWidth > 0) {\n      body.style.paddingRight = `${scrollbarWidth}px`\n    }\n\n    isLocked.value = true\n  }\n\n  /**\n   * 解锁滚动\n   */\n  const unlock = () => {\n    if (!isLocked.value) return\n\n    const body = document.body\n\n    // 恢复原始样式\n    body.style.overflow = originalOverflow.value\n    body.style.paddingRight = originalPaddingRight.value\n\n    isLocked.value = false\n  }\n\n  /**\n   * 切换锁定状态\n   */\n  const toggle = () => {\n    if (isLocked.value) {\n      unlock()\n    } else {\n      lock()\n    }\n  }\n\n  // 监听锁定状态变化\n  watch(isLocked, (locked) => {\n    if (locked) {\n      lock()\n    } else {\n      unlock()\n    }\n  })\n\n  // 组件卸载时解锁\n  onUnmounted(() => {\n    if (isLocked.value) {\n      unlock()\n    }\n  })\n\n  return {\n    isLocked,\n    lock,\n    unlock,\n    toggle\n  }\n}\n"],"names":[],"mappings":";;AAEA;AACA;AACA;AACA;AACO,SAAS,aAAa,CAAC,aAAa,GAAG,KAAK,EAAE;AACrD,EAAE,MAAM,QAAQ,GAAG,GAAG,CAAC,aAAa,EAAC;AACrC,EAAE,MAAM,gBAAgB,GAAG,GAAG,CAAC,EAAE,EAAC;AAClC,EAAE,MAAM,oBAAoB,GAAG,GAAG,CAAC,EAAE,EAAC;AACtC;AACA;AACA;AACA;AACA,EAAE,MAAM,IAAI,GAAG,MAAM;AACrB,IAAI,IAAI,QAAQ,CAAC,KAAK,EAAE,MAAM;AAC9B;AACA,IAAI,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAI;AAC9B,IAAI,MAAM,cAAc,GAAG,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAW;AACnF;AACA;AACA,IAAI,gBAAgB,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAQ;AAChD,IAAI,oBAAoB,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,aAAY;AACxD;AACA;AACA,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,SAAQ;AAClC;AACA;AACA,IAAI,IAAI,cAAc,GAAG,CAAC,EAAE;AAC5B,MAAM,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,EAAE,cAAc,CAAC,EAAE,EAAC;AACrD,KAAK;AACL;AACA,IAAI,QAAQ,CAAC,KAAK,GAAG,KAAI;AACzB,IAAG;AACH;AACA;AACA;AACA;AACA,EAAE,MAAM,MAAM,GAAG,MAAM;AACvB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM;AAC/B;AACA,IAAI,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAI;AAC9B;AACA;AACA,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,gBAAgB,CAAC,MAAK;AAChD,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,oBAAoB,CAAC,MAAK;AACxD;AACA,IAAI,QAAQ,CAAC,KAAK,GAAG,MAAK;AAC1B,IAAG;AACH;AACA;AACA;AACA;AACA,EAAE,MAAM,MAAM,GAAG,MAAM;AACvB,IAAI,IAAI,QAAQ,CAAC,KAAK,EAAE;AACxB,MAAM,MAAM,GAAE;AACd,KAAK,MAAM;AACX,MAAM,IAAI,GAAE;AACZ,KAAK;AACL,IAAG;AACH;AACA;AACA,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,KAAK;AAC9B,IAAI,IAAI,MAAM,EAAE;AAChB,MAAM,IAAI,GAAE;AACZ,KAAK,MAAM;AACX,MAAM,MAAM,GAAE;AACd,KAAK;AACL,GAAG,EAAC;AACJ;AACA;AACA,EAAE,WAAW,CAAC,MAAM;AACpB,IAAI,IAAI,QAAQ,CAAC,KAAK,EAAE;AACxB,MAAM,MAAM,GAAE;AACd,KAAK;AACL,GAAG,EAAC;AACJ;AACA,EAAE,OAAO;AACT,IAAI,QAAQ;AACZ,IAAI,IAAI;AACR,IAAI,MAAM;AACV,IAAI,MAAM;AACV,GAAG;AACH;;;;"}